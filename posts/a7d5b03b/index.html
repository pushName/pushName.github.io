<!DOCTYPE html><html lang="zh"><head><meta charset="utf-8"><meta name="baidu-site-verification" content="wwtMcTd8zK"><meta name="google-site-verification" content="F7nC_6_iDZGF_AxmRS2_Jyk3dV9LMmIyGsJ1-Dvo-Ko"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no,minimal-ui"><meta name="renderer" content="webkit"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="format-detection" content="telephone=no,email=no,adress=no"><meta name="theme-color" content="#000000"><meta http-equiv="window-target" content="_top"><meta name="google-site-verification" content="true"><title>软件开发框架之MyBatis | 阿智的博客</title><meta name="description" content="1. 什么是MyBatis  1.2 Hibernate-数据库交互的框架（ORM框架） 1.3 MyBatis是持久化层框架（SQL映射框架）-操作数据库 1.3.1 环境搭建 1.3.2 如何写xml有提示 1.3.3 Hello测试实例完整代码 1.3.4 利用MyBatis实现对数据库的增删改查   1.4 全局配置文件 1.4.1 配置文件的主要元素介绍 1.4.2 映射文件的主要元素介"><meta property="og:type" content="article"><meta property="og:title" content="软件开发框架之MyBatis"><meta property="og:url" content="http://www.studyz.club/posts/a7d5b03b/index.html"><meta property="og:site_name" content="阿智的个人博客"><meta property="og:description" content="1. 什么是MyBatis  1.2 Hibernate-数据库交互的框架（ORM框架） 1.3 MyBatis是持久化层框架（SQL映射框架）-操作数据库 1.3.1 环境搭建 1.3.2 如何写xml有提示 1.3.3 Hello测试实例完整代码 1.3.4 利用MyBatis实现对数据库的增删改查   1.4 全局配置文件 1.4.1 配置文件的主要元素介绍 1.4.2 映射文件的主要元素介"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="http://www.studyz.club/posts/a7d5b03b/1-1.png"><meta property="og:image" content="http://www.studyz.club/posts/a7d5b03b/1.png"><meta property="og:image" content="http://www.studyz.club/posts/a7d5b03b/1-3.png"><meta property="og:image" content="http://www.studyz.club/posts/a7d5b03b/1-2.png"><meta property="og:image" content="http://www.studyz.club/posts/a7d5b03b/1-4.png"><meta property="og:image" content="http://www.studyz.club/posts/a7d5b03b/1-2-1.png"><meta property="og:image" content="http://www.studyz.club/posts/a7d5b03b/1-3-1.png"><meta property="og:image" content="http://www.studyz.club/posts/a7d5b03b/1-3-2.png"><meta property="og:image" content="http://www.studyz.club/posts/a7d5b03b/1-3-3.png"><meta property="og:image" content="http://www.studyz.club/posts/a7d5b03b/1-3-4.png"><meta property="og:image" content="http://www.studyz.club/posts/a7d5b03b/1-3-6.png"><meta property="og:image" content="http://www.studyz.club/posts/a7d5b03b/1-3-5.png"><meta property="og:image" content="http://www.studyz.club/posts/a7d5b03b/1-3-7.png"><meta property="og:image" content="http://www.studyz.club/posts/a7d5b03b/1-3-8.png"><meta property="og:image" content="http://www.studyz.club/posts/a7d5b03b/1-4-1-1.png"><meta property="og:image" content="http://www.studyz.club/posts/a7d5b03b/1-4-1-2.png"><meta property="og:image" content="http://www.studyz.club/posts/a7d5b03b/1-4-1-3.png"><meta property="og:image" content="http://www.studyz.club/posts/a7d5b03b/1-4-1-4.png"><meta property="og:image" content="http://www.studyz.club/posts/a7d5b03b/1-4-1-5.png"><meta property="og:image" content="http://www.studyz.club/posts/a7d5b03b/1-4-1-6.png"><meta property="og:image" content="http://www.studyz.club/posts/a7d5b03b/1-4-1-7.png"><meta property="og:image" content="http://www.studyz.club/posts/a7d5b03b/1-4-2-1.png"><meta property="og:image" content="http://www.studyz.club/posts/a7d5b03b/1-4-1-8.png"><meta property="og:image" content="http://www.studyz.club/posts/a7d5b03b/1-4-1-9.png"><meta property="og:image" content="http://www.studyz.club/posts/a7d5b03b/1-3-4-1.png"><meta property="og:image" content="http://www.studyz.club/posts/a7d5b03b/1-3-4-2.png"><meta property="og:image" content="http://www.studyz.club/posts/a7d5b03b/1-4-1.png"><meta property="og:image" content="http://www.studyz.club/posts/a7d5b03b/1-4-3-1.png"><meta property="og:image" content="http://www.studyz.club/posts/a7d5b03b/1-4-2-2.png"><meta property="article:published_time" content="2019-10-31T13:19:00.438Z"><meta property="article:modified_time" content="2019-11-09T08:13:22.823Z"><meta property="article:author" content="阿智"><meta property="article:tag" content="-ssm -Spring -MyBatis"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="http://www.studyz.club/posts/a7d5b03b/1-1.png"><link rel="canonical" href="http://www.studyz.club/posts/a7d5b03b/index.html"><link rel="alternate" href="/atom.xml" title="阿智的个人博客" type="application/atom+xml"><link rel="icon" href="/favicon.png" type="image/x-icon"><link rel="stylesheet" href="/css/style.css"><meta name="generator" content="Hexo 5.4.0"></head><body class="main-center" itemscope itemtype="http://schema.org/WebPage"><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="slimContent"><div class="navbar-header"><div class="profile-block text-center"><a id="avatar" href="https://github.com/pushName" target="_blank" rel="external nofollow noopener noreferrer"><img class="img-circle img-rotate" src="/images/avatar.jpg" width="200" height="200"></a><h2 id="name" class="hidden-xs hidden-sm">阿智</h2><h3 id="title" class="hidden-xs hidden-sm hidden-md">BigData</h3><small id="location" class="text-muted hidden-xs hidden-sm"><i class="icon icon-map-marker"></i> China</small></div><div class="search" id="search-form-wrap"><form class="search-form sidebar-form"><div class="input-group"><input type="text" class="search-form-input form-control" placeholder="搜索"> <span class="input-group-btn"><button type="submit" class="search-form-submit btn btn-flat" onclick="return!1"><i class="icon icon-search"></i></button></span></div></form><div class="ins-search"><div class="ins-search-mask"></div><div class="ins-search-container"><div class="ins-input-wrapper"><input type="text" class="ins-search-input" placeholder="想要查找什么..." x-webkit-speech> <button type="button" class="close ins-close ins-selectable" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button></div><div class="ins-section-wrapper"><div class="ins-section-container"></div></div></div></div></div><button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#main-navbar" aria-controls="main-navbar" aria-expanded="false"><span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button></div><nav id="main-navbar" class="collapse navbar-collapse" itemscope itemtype="http://schema.org/SiteNavigationElement" role="navigation"><ul class="nav navbar-nav main-nav menu-highlight"><li class="menu-item menu-item-home"><a href="/."><i class="icon icon-home-fill"></i> <span class="menu-title">首页</span></a></li><li class="menu-item menu-item-archives"><a href="/archives"><i class="icon icon-archives-fill"></i> <span class="menu-title">归档</span></a></li><li class="menu-item menu-item-categories"><a href="/categories"><i class="icon icon-folder"></i> <span class="menu-title">分类</span></a></li><li class="menu-item menu-item-tags"><a href="/tags"><i class="icon icon-tags"></i> <span class="menu-title">标签</span></a></li><li class="menu-item menu-item-repository"><a href="/repository"><i class="icon icon-project"></i> <span class="menu-title">项目</span></a></li><li class="menu-item menu-item-books"><a href="/books"><i class="icon icon-book-fill"></i> <span class="menu-title">书单</span></a></li><li class="menu-item menu-item-links"><a href="/links"><i class="icon icon-friendship"></i> <span class="menu-title">友链</span></a></li><li class="menu-item menu-item-about"><a href="/about"><i class="icon icon-cup-fill"></i> <span class="menu-title">关于</span></a></li></ul><ul class="social-links"><li><a href="https://github.com/pushName" target="_blank" title="Github" data-toggle="tooltip" data-placement="top" rel="external nofollow noopener noreferrer"><i class="icon icon-github"></i></a></li><li><a href="https://weibo.com/5966656169/profile?topnav=1&wvr=6&is_all=1" target="_blank" title="Weibo" data-toggle="tooltip" data-placement="top" rel="external nofollow noopener noreferrer"><i class="icon icon-weibo"></i></a></li><li><a href="https://twitter.com" target="_blank" title="Twitter" data-toggle="tooltip" data-placement="top" rel="external nofollow noopener noreferrer"><i class="icon icon-twitter"></i></a></li><li><a href="https://www.behance.net/" target="_blank" title="Behance" data-toggle="tooltip" data-placement="top" rel="external nofollow noopener noreferrer"><i class="icon icon-behance"></i></a></li><li><a href="/atom.xml" target="_blank" title="Rss" data-toggle="tooltip" data-placement="top"><i class="icon icon-rss"></i></a></li></ul></nav></div></header><aside class="sidebar" itemscope itemtype="http://schema.org/WPSideBar"><div class="slimContent"><div class="widget"><h3 class="widget-title">公告</h3><div class="widget-body"><div id="board"><div class="content"><p>欢迎交流与分享经验!</p></div></div></div></div><div class="widget"><h3 class="widget-title">分类</h3><div class="widget-body"><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Hive/">Hive</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Hive/Hadoop-Hive/">Hadoop-Hive</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/IDEA/">IDEA</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Pythong%E5%AE%9E%E6%88%98-%E4%BD%BF%E7%94%A8GUI%E6%A1%86%E6%9E%B6/">Pythong实战-使用GUI框架</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Pythong%E5%AE%9E%E6%88%98-%E6%93%8D%E4%BD%9C%E6%95%B0%E6%8D%AE%E5%BA%93/">Pythong实战-操作数据库</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E4%B8%8E%E5%BA%94%E7%94%A8/">Python数据分析与应用</a><span class="category-list-count">2</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E4%B8%8E%E5%BA%94%E7%94%A8/numpy/">numpy</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Scala/">Scala</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/">hadoop</a><span class="category-list-count">17</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/eclipse/">eclipse</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/hbase/">hbase</a><span class="category-list-count">2</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/hbase/hbase%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/">hbase基本操作</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/hbase-Hive/">hbase-Hive</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/hbase-MapReduce/">hbase-MapReduce</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/hbaseAPI/">hbaseAPI</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/hdfs/">hdfs</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/mapreduce/">mapreduce</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/ssh/">ssh</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/yarn/">yarn</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop-hive/">hadoop-hive</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop-hive-DDL-DML/">hadoop-hive-DDL-DML</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/hbase/">hbase-</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/markdown/">markdown</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/mysql/">mysql</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/mysql/centos7-mysql8/">centos7-mysql8</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/vim/">vim</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/win10-php%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/">win10+php环境搭建</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%86%85%E5%AD%98%E8%AE%A1%E7%AE%97%E6%A1%86%E6%9E%B6spark/">内存计算框架spark</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%88%86%E5%B8%83%E5%BC%8F%E6%95%B0%E6%8D%AE%E5%BA%93/">分布式数据库</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE%E6%B5%81%E5%A4%84%E7%90%86%E6%A1%86%E6%9E%B6Storm/">大数据流处理框架Storm</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%95%B0%E6%8D%AE%E6%8C%96%E6%8D%AE%E6%A6%82%E5%BF%B5%E4%B8%8E%E6%8A%80%E6%9C%AF/">数据挖据概念与技术</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%95%B0%E6%8D%AE%E9%87%87%E9%9B%86%E4%B8%8E%E6%B8%85%E6%B4%97/">数据采集与清洗</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%AE%97%E6%B3%95%E7%BB%83%E4%B9%A0/">算法练习</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%AE%97%E6%B3%95%E7%BB%83%E4%B9%A0/%E4%BA%8C%E5%8F%89%E6%A0%91/">二叉树</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">计算机网络</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91%E6%A1%86%E6%9E%B6/">软件开发框架</a><span class="category-list-count">17</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91%E6%A1%86%E6%9E%B6/Maven%E9%A1%B9%E7%9B%AE%E6%9C%AC%E5%9C%B0%E4%BB%93%E5%BA%93%E9%85%8D%E7%BD%AE/">Maven项目本地仓库配置</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91%E6%A1%86%E6%9E%B6/SSM/">SSM</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91%E6%A1%86%E6%9E%B6/SpringMVC-REST/">SpringMVC-REST</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91%E6%A1%86%E6%9E%B6/SpringMVC-%E6%95%B0%E6%8D%AE%E8%BE%93%E5%87%BA/">SpringMVC-数据输出</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91%E6%A1%86%E6%9E%B6/SpringMVC-%E8%A7%86%E5%9B%BE%E8%A7%A3%E6%9E%90/">SpringMVC-视图解析</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91%E6%A1%86%E6%9E%B6/SpringMVC-%E8%AF%B7%E6%B1%82%E5%A4%84%E7%90%86/">SpringMVC-请求处理</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91%E6%A1%86%E6%9E%B6/%E5%88%A9%E7%94%A8SpringMVC%E5%81%9A%E4%B8%80%E4%B8%AA%E7%AC%A6%E5%90%88REST%E9%A3%8E%E6%A0%BC%E7%9A%84CRUD/">利用SpringMVC做一个符合REST风格的CRUD</a><span class="category-list-count">1</span></li></ul></li></ul></div></div><div class="widget"><h3 class="widget-title">标签</h3><div class="widget-body"><ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/hbase/" rel="tag">-hbase</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hbase-hbase-Hive/" rel="tag">-hbase - hbase-Hive</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hbase-hbase-Mapreduce/" rel="tag">-hbase - hbase-Mapreduce</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hbase-hbaseAPI/" rel="tag">-hbase - hbaseAPI</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hbase-hbase%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/" rel="tag">-hbase - hbase基本操作</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hive/" rel="tag">-hive</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ssm-MyBatis-MyBatis%E5%8A%A8%E6%80%81sql/" rel="tag">-ssm -MyBatis - MyBatis动态sql</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ssm-MyBatis-MyBatis%E7%BC%93%E5%AD%98%E6%9C%BA%E5%88%B6/" rel="tag">-ssm -MyBatis - MyBatis缓存机制</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ssm-Spring-spring-jdbc/" rel="tag">-ssm -Spring - spring-jdbc</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ssm-Spring-spring-%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86/" rel="tag">-ssm -Spring - spring-事务管理</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ssm-Spring-MyBatis/" rel="tag">-ssm -Spring -MyBatis</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ssm-Spring-MyBatis%E7%9A%84%E5%85%B3%E8%81%94%E6%98%A0%E5%B0%84/" rel="tag">-ssm -Spring MyBatis的关联映射</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%88%86%E5%B8%83%E5%BC%8F%E6%95%B0%E6%8D%AE%E5%BA%93-Hbase%E7%AE%80%E4%BB%8B/" rel="tag">-分布式数据库 -Hbase简介</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E6%8C%96%E6%8E%98%E6%A6%82%E5%BF%B5%E4%B8%8E%E6%8A%80%E6%9C%AF-%E5%BC%95%E8%AE%BA/" rel="tag">-数据挖掘概念与技术 -引论</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/AOP/" rel="tag">AOP</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Bean/" rel="tag">Bean</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hadoop-Hive/" rel="tag">Hadoop-Hive</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/IDEA%E5%B8%B8%E7%94%A8%E5%BF%AB%E6%8D%B7%E9%94%AE/" rel="tag">IDEA常用快捷键</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Maven%E9%A1%B9%E7%9B%AE%E6%9C%AC%E5%9C%B0%E4%BB%93%E5%BA%93%E9%85%8D%E7%BD%AE/" rel="tag">Maven项目本地仓库配置</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/" rel="tag">Python</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python-numpy/" rel="tag">Python numpy</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Pythong%E5%AE%9E%E6%88%98-%E4%BD%BF%E7%94%A8GUI%E6%A1%86%E6%9E%B6/" rel="tag">Pythong实战-使用GUI框架</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Pythong%E5%AE%9E%E6%88%98-%E6%93%8D%E4%BD%9C%E6%95%B0%E6%8D%AE%E5%BA%93/" rel="tag">Pythong实战-操作数据库</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E4%B8%8E%E5%BA%94%E7%94%A8/" rel="tag">Python数据分析与应用</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SSM/" rel="tag">SSM</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Scala/" rel="tag">Scala</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Scala%E5%AD%A6%E4%B9%A0-%E7%8E%AF%E5%A2%83%E7%9A%84%E6%90%AD%E5%BB%BA%E5%92%8C%E5%85%A5%E9%97%A8/" rel="tag">Scala学习-环境的搭建和入门</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Scala%E5%AD%A6%E4%B9%A0%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/" rel="tag">Scala学习基础知识</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spring/" rel="tag">Spring</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SpringMVC/" rel="tag">SpringMVC</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SpringMVC-REST/" rel="tag">SpringMVC-REST</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SpringMVC-%E6%95%B0%E6%8D%AE%E8%BE%93%E5%87%BA/" rel="tag">SpringMVC-数据输出</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SpringMVC-%E8%A7%86%E5%9B%BE%E8%A7%A3%E6%9E%90/" rel="tag">SpringMVC-视图解析</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SpringMVC-%E8%AF%B7%E6%B1%82%E5%A4%84%E7%90%86/" rel="tag">SpringMVC-请求处理</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/api/" rel="tag">api</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/centos7-mysql8/" rel="tag">centos7-mysql8</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/eclipse/" rel="tag">eclipse</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ha/" rel="tag">ha</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hadoop/" rel="tag">hadoop</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hbase/" rel="tag">hbase</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hdfs/" rel="tag">hdfs</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mapreduce/" rel="tag">mapreduce</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/markdown/" rel="tag">markdown</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ssh%E5%85%8D%E5%AF%86%E7%99%BB%E5%BD%95/" rel="tag">ssh免密登录</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ssm/" rel="tag">ssm</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vim/" rel="tag">vim</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/win10-php%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/" rel="tag">win10+php环境搭建</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/win7/" rel="tag">win7</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/wordcount/" rel="tag">wordcount</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/yarn/" rel="tag">yarn</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BA%8C%E5%8F%89%E6%A0%91/" rel="tag">二叉树</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%86%85%E5%AD%98%E8%AE%A1%E7%AE%97%E6%A1%86%E6%9E%B6spark/" rel="tag">内存计算框架spark</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%88%A9%E7%94%A8SpringMVC%E5%81%9A%E4%B8%80%E4%B8%AA%E7%AC%A6%E5%90%88REST%E9%A3%8E%E6%A0%BC%E7%9A%84CRUD/" rel="tag">利用SpringMVC做一个符合REST风格的CRUD</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%A4%A7%E6%95%B0%E6%8D%AE%E6%B5%81%E5%A4%84%E7%90%86%E6%A1%86%E6%9E%B6Storm/" rel="tag">大数据流处理框架Storm</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E9%87%87%E9%9B%86%E4%B8%8E%E6%B8%85%E6%B4%97/" rel="tag">数据采集与清洗</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82/" rel="tag">数据链路层</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%89%A9%E7%90%86%E5%B1%82/" rel="tag">物理层</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%AE%97%E6%B3%95%E7%BB%83%E4%B9%A0/" rel="tag">算法练习</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BD%91%E7%BB%9C%E5%B1%82/" rel="tag">网络层</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" rel="tag">计算机网络</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91%E6%A1%86%E6%9E%B6/" rel="tag">软件开发框架</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%9B%86%E7%BE%A4%E7%9A%84%E6%97%B6%E9%97%B4%E5%90%8C%E6%AD%A5/" rel="tag">集群的时间同步</a><span class="tag-list-count">1</span></li></ul></div></div><div class="widget"><h3 class="widget-title">标签云</h3><div class="widget-body tagcloud"><a href="/tags/hbase/" style="font-size:13px">-hbase</a> <a href="/tags/hbase-hbase-Hive/" style="font-size:13px">-hbase - hbase-Hive</a> <a href="/tags/hbase-hbase-Mapreduce/" style="font-size:13px">-hbase - hbase-Mapreduce</a> <a href="/tags/hbase-hbaseAPI/" style="font-size:13px">-hbase - hbaseAPI</a> <a href="/tags/hbase-hbase%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/" style="font-size:13px">-hbase - hbase基本操作</a> <a href="/tags/hive/" style="font-size:13.2px">-hive</a> <a href="/tags/ssm-MyBatis-MyBatis%E5%8A%A8%E6%80%81sql/" style="font-size:13px">-ssm -MyBatis - MyBatis动态sql</a> <a href="/tags/ssm-MyBatis-MyBatis%E7%BC%93%E5%AD%98%E6%9C%BA%E5%88%B6/" style="font-size:13px">-ssm -MyBatis - MyBatis缓存机制</a> <a href="/tags/ssm-Spring-spring-jdbc/" style="font-size:13px">-ssm -Spring - spring-jdbc</a> <a href="/tags/ssm-Spring-spring-%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86/" style="font-size:13px">-ssm -Spring - spring-事务管理</a> <a href="/tags/ssm-Spring-MyBatis/" style="font-size:13px">-ssm -Spring -MyBatis</a> <a href="/tags/ssm-Spring-MyBatis%E7%9A%84%E5%85%B3%E8%81%94%E6%98%A0%E5%B0%84/" style="font-size:13px">-ssm -Spring MyBatis的关联映射</a> <a href="/tags/%E5%88%86%E5%B8%83%E5%BC%8F%E6%95%B0%E6%8D%AE%E5%BA%93-Hbase%E7%AE%80%E4%BB%8B/" style="font-size:13px">-分布式数据库 -Hbase简介</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E6%8C%96%E6%8E%98%E6%A6%82%E5%BF%B5%E4%B8%8E%E6%8A%80%E6%9C%AF-%E5%BC%95%E8%AE%BA/" style="font-size:13px">-数据挖掘概念与技术 -引论</a> <a href="/tags/AOP/" style="font-size:13px">AOP</a> <a href="/tags/Bean/" style="font-size:13.2px">Bean</a> <a href="/tags/Hadoop-Hive/" style="font-size:13px">Hadoop-Hive</a> <a href="/tags/IDEA%E5%B8%B8%E7%94%A8%E5%BF%AB%E6%8D%B7%E9%94%AE/" style="font-size:13px">IDEA常用快捷键</a> <a href="/tags/Maven%E9%A1%B9%E7%9B%AE%E6%9C%AC%E5%9C%B0%E4%BB%93%E5%BA%93%E9%85%8D%E7%BD%AE/" style="font-size:13px">Maven项目本地仓库配置</a> <a href="/tags/Python/" style="font-size:13px">Python</a> <a href="/tags/Python-numpy/" style="font-size:13px">Python numpy</a> <a href="/tags/Pythong%E5%AE%9E%E6%88%98-%E4%BD%BF%E7%94%A8GUI%E6%A1%86%E6%9E%B6/" style="font-size:13px">Pythong实战-使用GUI框架</a> <a href="/tags/Pythong%E5%AE%9E%E6%88%98-%E6%93%8D%E4%BD%9C%E6%95%B0%E6%8D%AE%E5%BA%93/" style="font-size:13px">Pythong实战-操作数据库</a> <a href="/tags/Python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E4%B8%8E%E5%BA%94%E7%94%A8/" style="font-size:13.2px">Python数据分析与应用</a> <a href="/tags/SSM/" style="font-size:13px">SSM</a> <a href="/tags/Scala/" style="font-size:13.8px">Scala</a> <a href="/tags/Scala%E5%AD%A6%E4%B9%A0-%E7%8E%AF%E5%A2%83%E7%9A%84%E6%90%AD%E5%BB%BA%E5%92%8C%E5%85%A5%E9%97%A8/" style="font-size:13px">Scala学习-环境的搭建和入门</a> <a href="/tags/Scala%E5%AD%A6%E4%B9%A0%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/" style="font-size:13.6px">Scala学习基础知识</a> <a href="/tags/Spring/" style="font-size:13.4px">Spring</a> <a href="/tags/SpringMVC/" style="font-size:13px">SpringMVC</a> <a href="/tags/SpringMVC-REST/" style="font-size:13px">SpringMVC-REST</a> <a href="/tags/SpringMVC-%E6%95%B0%E6%8D%AE%E8%BE%93%E5%87%BA/" style="font-size:13px">SpringMVC-数据输出</a> <a href="/tags/SpringMVC-%E8%A7%86%E5%9B%BE%E8%A7%A3%E6%9E%90/" style="font-size:13px">SpringMVC-视图解析</a> <a href="/tags/SpringMVC-%E8%AF%B7%E6%B1%82%E5%A4%84%E7%90%86/" style="font-size:13px">SpringMVC-请求处理</a> <a href="/tags/api/" style="font-size:13px">api</a> <a href="/tags/centos7-mysql8/" style="font-size:13px">centos7-mysql8</a> <a href="/tags/eclipse/" style="font-size:13px">eclipse</a> <a href="/tags/ha/" style="font-size:13.2px">ha</a> <a href="/tags/hadoop/" style="font-size:13.6px">hadoop</a> <a href="/tags/hbase/" style="font-size:13px">hbase</a> <a href="/tags/hdfs/" style="font-size:13.8px">hdfs</a> <a href="/tags/mapreduce/" style="font-size:13.4px">mapreduce</a> <a href="/tags/markdown/" style="font-size:13px">markdown</a> <a href="/tags/ssh%E5%85%8D%E5%AF%86%E7%99%BB%E5%BD%95/" style="font-size:13px">ssh免密登录</a> <a href="/tags/ssm/" style="font-size:13.4px">ssm</a> <a href="/tags/vim/" style="font-size:13px">vim</a> <a href="/tags/win10-php%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/" style="font-size:13px">win10+php环境搭建</a> <a href="/tags/win7/" style="font-size:13px">win7</a> <a href="/tags/wordcount/" style="font-size:13px">wordcount</a> <a href="/tags/yarn/" style="font-size:13px">yarn</a> <a href="/tags/%E4%BA%8C%E5%8F%89%E6%A0%91/" style="font-size:13px">二叉树</a> <a href="/tags/%E5%86%85%E5%AD%98%E8%AE%A1%E7%AE%97%E6%A1%86%E6%9E%B6spark/" style="font-size:13.2px">内存计算框架spark</a> <a href="/tags/%E5%88%A9%E7%94%A8SpringMVC%E5%81%9A%E4%B8%80%E4%B8%AA%E7%AC%A6%E5%90%88REST%E9%A3%8E%E6%A0%BC%E7%9A%84CRUD/" style="font-size:13px">利用SpringMVC做一个符合REST风格的CRUD</a> <a href="/tags/%E5%A4%A7%E6%95%B0%E6%8D%AE%E6%B5%81%E5%A4%84%E7%90%86%E6%A1%86%E6%9E%B6Storm/" style="font-size:13px">大数据流处理框架Storm</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E9%87%87%E9%9B%86%E4%B8%8E%E6%B8%85%E6%B4%97/" style="font-size:13px">数据采集与清洗</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82/" style="font-size:13px">数据链路层</a> <a href="/tags/%E7%89%A9%E7%90%86%E5%B1%82/" style="font-size:13px">物理层</a> <a href="/tags/%E7%AE%97%E6%B3%95%E7%BB%83%E4%B9%A0/" style="font-size:13px">算法练习</a> <a href="/tags/%E7%BD%91%E7%BB%9C%E5%B1%82/" style="font-size:13px">网络层</a> <a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" style="font-size:13.6px">计算机网络</a> <a href="/tags/%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91%E6%A1%86%E6%9E%B6/" style="font-size:14px">软件开发框架</a> <a href="/tags/%E9%9B%86%E7%BE%A4%E7%9A%84%E6%97%B6%E9%97%B4%E5%90%8C%E6%AD%A5/" style="font-size:13px">集群的时间同步</a></div></div><div class="widget"><h3 class="widget-title">归档</h3><div class="widget-body"><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">三月 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">六月 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">五月 2020</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">四月 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">三月 2020</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">一月 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">十二月 2019</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">十一月 2019</a><span class="archive-list-count">19</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">十月 2019</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">九月 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">七月 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">六月 2019</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">五月 2019</a><span class="archive-list-count">9</span></li></ul></div></div><div class="widget"><h3 class="widget-title">最新文章</h3><div class="widget-body"><ul class="recent-post-list list-unstyled no-thumbnail"><li><div class="item-inner"><p class="item-category"><a class="category-link" href="/categories/%E7%AE%97%E6%B3%95%E7%BB%83%E4%B9%A0/">算法练习</a><i class="icon icon-angle-right"></i><a class="category-link" href="/categories/%E7%AE%97%E6%B3%95%E7%BB%83%E4%B9%A0/%E4%BA%8C%E5%8F%89%E6%A0%91/">二叉树</a></p><p class="item-title"><a href="/posts/b7e858de/" class="title">算法练习-二叉树涂色问题</a></p><p class="item-date"><time datetime="2021-03-04T17:58:17.147Z" itemprop="datePublished">2021-03-05</time></p></div></li><li><div class="item-inner"><p class="item-category"><a class="category-link" href="/categories/Pythong%E5%AE%9E%E6%88%98-%E4%BD%BF%E7%94%A8GUI%E6%A1%86%E6%9E%B6/">Pythong实战-使用GUI框架</a></p><p class="item-title"><a href="/posts/855e4ddc/" class="title">Python综合项目案例开发--使用GUI框架</a></p><p class="item-date"><time datetime="2020-06-05T00:38:41.099Z" itemprop="datePublished">2020-06-05</time></p></div></li><li><div class="item-inner"><p class="item-category"><a class="category-link" href="/categories/Pythong%E5%AE%9E%E6%88%98-%E6%93%8D%E4%BD%9C%E6%95%B0%E6%8D%AE%E5%BA%93/">Pythong实战-操作数据库</a></p><p class="item-title"><a href="/posts/fb315820/" class="title">Python综合项目案例开发--使用Python操作数据库</a></p><p class="item-date"><time datetime="2020-05-23T08:00:55.227Z" itemprop="datePublished">2020-05-23</time></p></div></li><li><div class="item-inner"><p class="item-category"><a class="category-link" href="/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE%E6%B5%81%E5%A4%84%E7%90%86%E6%A1%86%E6%9E%B6Storm/">大数据流处理框架Storm</a></p><p class="item-title"><a href="/posts/7c5fe410/" class="title">大数据流处理框架--Storm</a></p><p class="item-date"><time datetime="2020-05-21T09:23:21.219Z" itemprop="datePublished">2020-05-21</time></p></div></li><li><div class="item-inner"><p class="item-category"><a class="category-link" href="/categories/%E5%86%85%E5%AD%98%E8%AE%A1%E7%AE%97%E6%A1%86%E6%9E%B6spark/">内存计算框架spark</a></p><p class="item-title"><a href="/posts/46aea7fc/" class="title">内存计算框架--Spark编程模型</a></p><p class="item-date"><time datetime="2020-05-21T07:04:18.159Z" itemprop="datePublished">2020-05-21</time></p></div></li></ul></div></div></div></aside><main class="main" role="main"><div class="content"><article id="post-软件开发框架之Spring-MyBatis" class="article article-type-post" itemscope itemtype="http://schema.org/BlogPosting"><div class="article-header"><h1 class="article-title" itemprop="name">软件开发框架之MyBatis</h1><div class="article-meta"><span class="article-date"><i class="icon icon-calendar-check"></i> <a href="/posts/a7d5b03b/" class="article-date"><time datetime="2019-10-31T13:19:00.438Z" itemprop="datePublished">2019-10-31</time> </a></span><span class="article-category"><i class="icon icon-folder"></i> <a class="article-category-link" href="/categories/%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91%E6%A1%86%E6%9E%B6/">软件开发框架</a> </span><span class="article-tag"><i class="icon icon-tags"></i> <a class="article-tag-link-link" href="/tags/ssm-Spring-MyBatis/" rel="tag">-ssm -Spring -MyBatis</a> </span><span class="article-read hidden-xs"><i class="icon icon-eye-fill" aria-hidden="true"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span> </span></span><span class="post-comment"><i class="icon icon-comment"></i> <a href="/posts/a7d5b03b/#comments" class="article-comment-link">评论</a></span> <span class="post-wordcount hidden-xs" itemprop="wordCount">字数统计: 16.7k(字)</span> <span class="post-readcount hidden-xs" itemprop="timeRequired">阅读时长: 81(分)</span></div></div><div class="article-entry marked-body" itemprop="articleBody"><p><a href="#1">1. 什么是MyBatis</a></p><ul><li><a href="#1.2">1.2 Hibernate-数据库交互的框架（ORM框架）</a></li><li><a href="#1.3">1.3 MyBatis是持久化层框架（SQL映射框架）-操作数据库</a><ul><li><a href="#1.3.1">1.3.1 环境搭建</a></li><li><a href="#1.3.2">1.3.2 如何写xml有提示</a></li><li><a href="#1.3.3">1.3.3 Hello测试实例完整代码</a></li><li><a href="#1.3.4">1.3.4 利用MyBatis实现对数据库的增删改查</a></li></ul></li><li><a href="#1.4">1.4 全局配置文件</a><ul><li><a href="#1.4.1">1.4.1 配置文件的主要元素介绍</a></li><li><a href="#1.4.2">1.4.2 映射文件的主要元素介绍</a><ul><li><a href="#1.4.2.1">1.4.2.1 传参问题</a></li><li></li></ul></li><li><a target="_blank" rel="external nofollow noopener noreferrer" href="https://mybatis.org/mybatis-3/zh/index.html">MyBatis官方中文文档</a></li><li><a href="#1.4.3">1.4.3 配置文件详解测试实例源码</a></li></ul></li></ul><h3 id="1-什么是MyBatis"><a href="#1-什么是MyBatis" class="headerlink" title="1. 什么是MyBatis"></a><h id="1">1. 什么是MyBatis</h></h3><blockquote><p><code>MyBatis</code>框架也被称之为<code>ORM</code>（Object/Relation Mapping，即对象关系映射）框架。所谓的ORM就是一种为了解决面向对象与关系型数据库中数据类型不匹配的技术，它通过描述Java对象与数据库表之间的映射关系，自动将Java应用程序中的对象持久化到关系型数据库的表中。</p></blockquote><ul><li><code>MyBatis</code>（前身是iBatis）是一个支持普通SQL查询、存储过程以及高级映射的<code>持久层框架</code>。<br><img src="/posts/a7d5b03b/1-1.png"></li></ul><h5 id="MyBatis官方中文文档"><a href="#MyBatis官方中文文档" class="headerlink" title="MyBatis官方中文文档"></a><a target="_blank" rel="external nofollow noopener noreferrer" href="https://mybatis.org/mybatis-3/zh/index.html">MyBatis官方中文文档</a></h5><h5 id="MyBatis–GitHub地址，下载地址"><a href="#MyBatis–GitHub地址，下载地址" class="headerlink" title="MyBatis–GitHub地址，下载地址"></a><a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/mybatis/mybatis-3">MyBatis–GitHub地址，下载地址</a></h5><h4 id="ORM框架的工作原理"><a href="#ORM框架的工作原理" class="headerlink" title="ORM框架的工作原理"></a>ORM框架的工作原理</h4><p><img src="/posts/a7d5b03b/1.png"></p><h4 id="1-2-Hibernate-数据库交互的框架（ORM框架）"><a href="#1-2-Hibernate-数据库交互的框架（ORM框架）" class="headerlink" title="1.2 Hibernate-数据库交互的框架（ORM框架）"></a><h id="1.2">1.2 Hibernate-数据库交互的框架（ORM框架）</h></h4><p>（使用各种框架，全自动的框架）</p><p><img src="/posts/a7d5b03b/1-3.png"></p><h4 id="需求"><a href="#需求" class="headerlink" title="需求"></a>需求</h4><ul><li>最好有一个框架能支持定制化sql，而且还功能强大；sql也不要硬编码在java文件中（导致维护修改起来比较麻烦）；<br><img src="/posts/a7d5b03b/1-2.png"></li></ul><blockquote><p>jdbc是纯手工， Hibernate是全自动。就像洗衣机纯手工麻烦，全自动洗衣机不能完成对有特殊洗涤要求的衣服进行定点清洗。而MyBatis将SQL文件单独放出来其他步骤自动执行，便于维护。</p></blockquote><ul><li>1）、MyBatis将重要的步骤抽取出来可以人工定制，其他步骤自动化；</li><li>2）、重要步骤都是写在配置文件中（好维护）；</li><li>3）、完全解决数据库的优化问题；</li><li>4）、MyBatis底层就是对原生JDBC的一个简单封装；</li><li>5）、既将java编码与sql抽取了出来，还不会失去自动化功能；半自动的持久化层框架；</li><li>6）、mybatis是一个轻量级的框架；</li></ul><h4 id="Hibernate与MyBatis有什么区别"><a href="#Hibernate与MyBatis有什么区别" class="headerlink" title="Hibernate与MyBatis有什么区别"></a>Hibernate与MyBatis有什么区别</h4><p><img src="/posts/a7d5b03b/1-4.png"></p><h4 id="MyBatis工作原理"><a href="#MyBatis工作原理" class="headerlink" title="MyBatis工作原理"></a>MyBatis工作原理</h4><p><img src="/posts/a7d5b03b/1-2-1.png"></p><h3 id="1-3-MyBatis是持久化层框架（SQL映射框架）-操作数据库"><a href="#1-3-MyBatis是持久化层框架（SQL映射框架）-操作数据库" class="headerlink" title="1.3 MyBatis是持久化层框架（SQL映射框架）-操作数据库"></a><h id="1.3">1.3 MyBatis是持久化层框架（SQL映射框架）-操作数据库</h></h3><h4 id="1-3-1-环境搭建"><a href="#1-3-1-环境搭建" class="headerlink" title="1.3.1 环境搭建"></a><h id="1.3.1">1.3.1 环境搭建</h></h4><blockquote><ul><li>使用MyBatis框架非常简单，只需在应用程序中引入MyBatis的核心包和lib目录中的依赖包即可。</li></ul></blockquote><ul><li>如果底层采用的是MySQL数据库，那么还需要将MySQL数据库的驱动JAR包添加到应用程序的类路径中；如果采用其他类型的数据库，则同样需要将对应类型的数据库驱动包添加到应用程序的类路径中。</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">1）、环境搭建</span><br><span class="line">     1）、创建一个java工程；</span><br><span class="line">     2）、创建测试库，测试表，以及封装数据的javaBean，和操作数据库的dao接口</span><br><span class="line">               创建表：自己用工具创建</span><br><span class="line">               创建javaBean：Employee（封装表的数据）</span><br><span class="line">               创建一个Dao接口，用来操作数据库；</span><br><span class="line"></span><br><span class="line">     3）、用MyBatis操作数据库？</span><br><span class="line">               1）、导包</span><br><span class="line">    &#x2F;&#x2F;mysql-connector-java-5.1.37-bin.jar</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;mybatis-3.4.1.jar</span><br><span class="line"></span><br><span class="line">   &#x2F;&#x2F;log4j-1.2.17.jar</span><br><span class="line">       &#x2F;&#x2F;建议导入日志包；这样的化在mybatis关键的环节就会有日志打印；</span><br><span class="line">       &#x2F;&#x2F;log4j（日志框架）;依赖类路径下一个log4j.xml配置文件；</span><br><span class="line">               2）、写配置（两个，全局配置文件（指导mybatis运行的），dao接口的实现文件（描述dao中每个方法怎么工作））</span><br><span class="line">                         1）、第一个配置文件；（称为mybatis的全局配置文件，指导mybatis如何正确运行，比如连接向哪个数据库）(mybatis-config.xml)</span><br><span class="line">                         2）、第二个配置文件：（编写每一个方法都如何向数据库发送sql语句，如何执行。。。。相当于接口的实现类）(EmployeeDao.xml)</span><br><span class="line">                                   1)、将mapper的namespace属性改为接口的全类名</span><br><span class="line">                                   2)、配置细节</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>第二个配置文件配置细节<br><img src="/posts/a7d5b03b/1-3-1.png"></p><p>3）、我们写的dao接口的实现文件，mybatis默认是不知道的，需要在全局配置文件中注册；</p><p><img src="/posts/a7d5b03b/1-3-2.png"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">3）、测试</span><br><span class="line">                1）、根据全局配置文件先创建一个</span><br></pre></td></tr></table></figure><p><img src="/posts/a7d5b03b/1-3-3.png"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2）、sqlSessionFactory中获取sqlSession对象操作数据库即可</span><br></pre></td></tr></table></figure><p><img src="/posts/a7d5b03b/1-3-4.png"></p><h5 id="Hello测试实例完整代码"><a href="#Hello测试实例完整代码" class="headerlink" title="Hello测试实例完整代码"></a><a href="#1.3.3">Hello测试实例完整代码</a></h5><h4 id="1-3-2-如何写xml有提示"><a href="#1-3-2-如何写xml有提示" class="headerlink" title="1.3.2 如何写xml有提示"></a><h id="1.3.2">1.3.2 如何写xml有提示</h></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1）、只要eclipse找到了这个文件的dtd约束文件的位置即可</span><br><span class="line">2）、绑定约束文件的位置</span><br><span class="line">          1、复制dtd的引用网址：</span><br><span class="line">            http:&#x2F;&#x2F;mybatis.org&#x2F;dtd&#x2F;mybatis-3-config.dtd(这个是mybatis-config.xml需要的，哪个配置文件需要什么dtd文件在配置文件头可以看到，别的配置文件想要有提示也需要按此方法配置)</span><br><span class="line">          2.windows--&gt;Preferences--&gt;XML--&gt;XML Catalog--&gt;Add</span><br></pre></td></tr></table></figure><p>将mybatis的jar包解压缩就可得到这俩dtd文件</p><p><img src="/posts/a7d5b03b/1-3-6.png"><br><img src="/posts/a7d5b03b/1-3-5.png"><br><img src="/posts/a7d5b03b/1-3-7.png"><br><img src="/posts/a7d5b03b/1-3-8.png"></p><h4 id="两个文件："><a href="#两个文件：" class="headerlink" title="两个文件："></a>两个文件：</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">     1）、全局配置文件：mybatis-config.xml；指导mybatis正确运行的一些全局设置；</span><br><span class="line">     2）、SQL映射文件：EmployeeDao.xml；相当于是对Dao接口的一个实现描述</span><br><span class="line">细节：</span><br><span class="line">     1）、获取到的是接口的代理对象；mybatis自动创建的；</span><br><span class="line">     2）、SqlSessionFactory和SqlSession；</span><br><span class="line">          SqlSessionFactory创建SqlSession对象，Factory只new一次就行</span><br><span class="line">          SqlSession：相当于connection和数据库进行交互的，和数据库的一次会话，就应该创建一个新的sqlSession；</span><br></pre></td></tr></table></figure><h3 id="1-4-配置文件元素"><a href="#1-4-配置文件元素" class="headerlink" title="1.4 配置文件元素"></a><h id="1.4">1.4 配置文件元素</h></h3><h4 id="SqlSessionFactory"><a href="#SqlSessionFactory" class="headerlink" title="SqlSessionFactory"></a>SqlSessionFactory</h4><ul><li><code>SqlSessionFactory</code>:是MyBatis框架中十分重要的对象，它是单个数据库映射关系经过编译后的内存镜像，其主要作用是创建<code>SqlSession</code>。</li><li><code>SqlSessionFactory</code>对象的实例可以通过<code>SqlSessionFactoryBuilder</code>对象来构建，而SqlSessionFactoryBuilder则可以通过<code>XML配置文件</code>或一个预先定义好的<code>Configuration实例</code>构建出SqlSessionFactory的实例。</li><li>通过XML配置文件构建出的SqlSessionFactory实例现代码如下：</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">InputStream inputStream &#x3D; Resources.getResourceAsStream(&quot;配置文件位置&quot;);</span><br><span class="line">SqlSessionFactory sqlSessionFactory &#x3D; new SqlSessionFactoryBuilder().build(inputStream);</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>SqlSessionFactory对象是<code>线程安全的</code>，它一旦被创建，在<code>整个应用执行期间都会存在</code>。如果我们多次的创建同一个数据库的SqlSessionFactory，那么此数据库的资源将很容易被耗尽。为此，通常<code>每一个数据库都会只对应一个SqlSessionFactory</code>，所以在构建SqlSessionFactory实例时，建议使用<code>单列模式</code>。</li></ul><h4 id="SqlSession"><a href="#SqlSession" class="headerlink" title="SqlSession"></a>SqlSession</h4><ul><li><p><code>SqlSession</code>是MyBatis框架中另一个重要的对象，它是应用程序与持久层之间执行交互操作的一个<code>单线程对象</code>，其主要作用是<code>执行持久化操作</code>。</p></li><li><p><code>使用完SqlSession对象后要及时关闭，通常可以将其放在finally块中关闭。</code></p></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SqlSession sqlSession &#x3D; sqlSessionFactory.openSession();</span><br><span class="line">try &#123;</span><br><span class="line">       &#x2F;&#x2F; 此处执行持久化操作</span><br><span class="line">&#125; finally &#123;</span><br><span class="line">      sqlSession.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="使用工具类创建SqlSession"><a href="#使用工具类创建SqlSession" class="headerlink" title="使用工具类创建SqlSession"></a>使用工具类创建SqlSession</h5><ul><li>为了简化开发，通常在实际项目中都会使用工具类来创建SqlSession</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">public class MybatisUtils &#123;</span><br><span class="line">          private static SqlSessionFactory sqlSessionFactory &#x3D; null;</span><br><span class="line">          static &#123;</span><br><span class="line">              try &#123;</span><br><span class="line">	    Reader reader &#x3D; Resources.getResourceAsReader(&quot;mybatis-config.xml&quot;);</span><br><span class="line">	    sqlSessionFactory &#x3D;  new SqlSessionFactoryBuilder().build(reader);</span><br><span class="line">              &#125; catch (Exception e) &#123;</span><br><span class="line">	    e.printStackTrace();</span><br><span class="line">              &#125;</span><br><span class="line">          &#125;</span><br><span class="line">          public static SqlSession getSession() &#123;</span><br><span class="line">               return sqlSessionFactory.openSession();</span><br><span class="line">          &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="1-4-1-配置文件的主要元素介绍"><a href="#1-4-1-配置文件的主要元素介绍" class="headerlink" title="1.4.1 配置文件的主要元素介绍"></a><h id="1.4.1">1.4.1 配置文件的主要元素介绍</h></h4><blockquote><p>实例中的mybatis-config.xml</p></blockquote><p><a href="#1.4.3.2">mybatis-config.xml</a></p><ul><li>在MyBatis框架的核心配置文件中，<code>&lt;configuration&gt;</code>元素是配置文件的根元素，其他元素都要在<code>&lt;configuration&gt;</code>元素内配置。</li></ul><p><img src="/posts/a7d5b03b/1-4-1-1.png"></p><h4 id="1-lt-properties-gt-元素"><a href="#1-lt-properties-gt-元素" class="headerlink" title="1.&lt;properties&gt;元素"></a>1.<code>&lt;properties&gt;</code>元素</h4><ul><li><code>&lt;properties&gt;</code>是一个配置属性的元素，该元素通常用来将<code>内部的配置外在化</code>，即通过外部的配置来动态的替换内部定义的属性。例如，数据库的连接等属性，就可以通过典型的Java属性文件中的配置来替换，具体方式如下：</li></ul><p>1.编写db.properties</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">username&#x3D;root</span><br><span class="line">password&#x3D;******</span><br><span class="line">driverclass&#x3D;com.mysql.cj.jdbc.Driver</span><br><span class="line">jdbcurl&#x3D;jdbc:mysql:&#x2F;&#x2F;localhost:3306&#x2F;mybatis_0325?serverTimezone&#x3D;GMT%2B8&amp;useSSL&#x3D;false</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>2.配置&lt;properties… /&gt;属性</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 1. 和Spring的context,property-placeholder;引用外部配置文件 --&gt;</span><br><span class="line">	&lt;!--</span><br><span class="line">	resource : 从类路径下开始引用</span><br><span class="line">	url: 引用磁盘路径文件或者网络路径的资源</span><br><span class="line">	 --&gt;</span><br><span class="line">	&lt;properties resource&#x3D;&quot;dbconfig.properties&quot;&gt;&lt;&#x2F;properties&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>3.修改配置文件中数据库连接的信息</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;dataSource type&#x3D;&quot;POOLED&quot;&gt;</span><br><span class="line">      	&lt;!-- $&#123;&#125;取出配置值 --&gt;</span><br><span class="line">        &lt;property name&#x3D;&quot;driver&quot; value&#x3D;&quot;$&#123;driverclass&#125;&quot;&#x2F;&gt;</span><br><span class="line">        &lt;property name&#x3D;&quot;url&quot; value&#x3D;&quot;$&#123;jdbcurl&#125;&quot;&#x2F;&gt;</span><br><span class="line">        &lt;property name&#x3D;&quot;username&quot; value&#x3D;&quot;$&#123;username&#125;&quot;&#x2F;&gt;</span><br><span class="line">        &lt;property name&#x3D;&quot;password&quot; value&#x3D;&quot;$&#123;password&#125;&quot;&#x2F;&gt;</span><br><span class="line">      &lt;&#x2F;dataSource&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="2-lt-settings-gt-元素"><a href="#2-lt-settings-gt-元素" class="headerlink" title="2.&lt;settings&gt;元素"></a>2.<code>&lt;settings&gt;</code>元素</h4><ul><li><code>&lt;settings&gt;</code>元素主要用于改变MyBatis运行时的行为，例如开启二级缓存、开启延迟加载等。</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 2. settings这是 MyBatis 中极为重要的调整设置，它们会改变 MyBatis 的运行时行为。 详见文档 --&gt;</span><br><span class="line">	&lt;!-- </span><br><span class="line">	mapUnderscoreToCamelCase: 是否开启自动驼峰命名规则（camel case）映射，即从经典数据库列名 A_COLUMN 到经典 Java 属性名 aColumn 的类似映射。 </span><br><span class="line">	 即在接口Employee中，用驼峰命名可以和数据库中用下划线命名的列名相对应,javaBean 可以自动对应</span><br><span class="line">	 --&gt;</span><br><span class="line">	&lt;settings&gt;</span><br><span class="line">		&lt;!-- name: 配置项的key value:配置项的值 --&gt;</span><br><span class="line">		&lt;!-- 数据库不区分大小写 	loginAcount  login_account --&gt;</span><br><span class="line">		&lt;setting name&#x3D;&quot;mapUnderscoreToCamelCase&quot; value&#x3D;&quot;true&quot;&#x2F;&gt;</span><br><span class="line">	&lt;&#x2F;settings&gt;</span><br><span class="line">	</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>上述示例配置通常不需要开发人员去配置，了解即可。</li></ul><h4 id="3-lt-typeAliases-gt-元素"><a href="#3-lt-typeAliases-gt-元素" class="headerlink" title="3.&lt;typeAliases&gt;元素"></a>3.<code>&lt;typeAliases&gt;</code>元素</h4><ul><li><code>&lt;typeAliases&gt;</code>元素用于为配置文件中的Java类型设置一个简短的名字，即设置别名。别名的设置与XML配置相关，其使用的意义在于减少全限定类名的冗余。</li></ul><p>3.1 使用<typealiases>元素配置别名的方法如下：</typealiases></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 3.类型别名，为常用的类型（JavaBean）起别名 --&gt;</span><br><span class="line">	&lt;typeAliases&gt;</span><br><span class="line">		&lt;!-- typeAlias: 就是为一个javaBean起别名；别名默认就是类名（不区分大小写），配置文件中就可以用别名了 --&gt;</span><br><span class="line">		&lt;!-- 在EmployeeDao.xml中&lt;select id&#x3D;&quot;getEmpById&quot; resultType&#x3D;&quot;Emp&quot; &gt;标签就可以直接用Employee代替简化开发 </span><br><span class="line">			alias&#x3D;&quot;&quot;指定一个别名如果不指定就是默认Employee--&gt;</span><br><span class="line">		&lt;!-- &lt;typeAlias type&#x3D;&quot;com.lizhi.bean.Employee&quot; alias&#x3D;&quot;emp&quot;&#x2F;&gt;--&gt;</span><br><span class="line">		</span><br><span class="line">		&lt;!-- 批量起别名 ，name&#x3D;&quot;&quot;指定包名，为这个包下的所有类起别名,默认别名就是类名</span><br><span class="line">			也可以在指定的类上面添加@Alias(&quot;&quot;)注解的方式指定别名</span><br><span class="line">		--&gt;</span><br><span class="line">		&lt;!-- &lt;package name&#x3D;&quot;com.lizhi.bean&quot;&#x2F;&gt;--&gt;</span><br><span class="line">		&lt;!-- 推荐使用全类名 --&gt;		</span><br><span class="line">		&lt;&#x2F;typeAliases&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;typeAliases&gt;</span><br><span class="line">             &lt;typeAlias alias&#x3D;&quot;user&quot; type&#x3D;&quot;com.dqsy.po.User&quot;&#x2F;&gt;</span><br><span class="line">     &lt;&#x2F;typeAliases&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>3.2 当POJO类过多时，可以通过自动扫描包的形式自定义别名，具体如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;typeAliases&gt;</span><br><span class="line">            &lt;package name&#x3D;&quot;com.dqsy.po&quot;&#x2F;&gt;</span><br><span class="line">    &lt;&#x2F;typeAliases&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li><p><code>如果在程序中使用了注解，则别名为其注解的值。</code></p></li><li><p>MyBatis框架默认为许多常见的Java类型提供了相应的类型别名，如下表所示。<br><img src="/posts/a7d5b03b/1-4-1-2.png"></p></li></ul><h4 id="4-lt-typeHandler-gt-元素"><a href="#4-lt-typeHandler-gt-元素" class="headerlink" title="4.&lt;typeHandler&gt;元素"></a>4.<code>&lt;typeHandler&gt;</code>元素</h4><ul><li><code>&lt;typeHandler&gt;</code>的作用就是将预处理语句中传入的参数从javaType（Java类型）转换为jdbcType（JDBC类型），或者从数据库取出结果时将jdbcType转换为javaType。</li><li><code>&lt;typeHandler&gt;</code>元素可以在配置文件中注册自定义的类型处理器，它的使用方式有两种。</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">原生jdbc执行sql；或者封装结果集</span><br><span class="line">   Connection connection &#x3D;  dataSource.getConnection();</span><br><span class="line">     String sql &#x3D; &quot;insert into t_employee(empname,email,gender) value(?,?,?)&quot;;</span><br><span class="line">   PreparedStatement ps &#x3D;  connection.prepareStatement(sql);</span><br><span class="line">     ps.setString(0,&quot;admin&quot;);</span><br><span class="line">     ps.setString(1,&quot;aaa@qq.com&quot;);</span><br><span class="line">     ps.setInt(2,12);</span><br><span class="line">    int i &#x3D;  ps.executeUpdate()</span><br><span class="line">     &#x2F;&#x2F;ps.close();connection.close();</span><br></pre></td></tr></table></figure><p>1.注册一个类的类型处理器</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;typeHandlers&gt;</span><br><span class="line">       &lt;typeHandler handler&#x3D;&quot;com.dqsy.type.CustomtypeHandler&quot; &#x2F;&gt;</span><br><span class="line">  &lt;&#x2F;typeHandlers&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>2.注册一个包中所有的类型处理器</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;typeHandlers&gt;</span><br><span class="line">       &lt;package name&#x3D;&quot;com.dqsy.type&quot; &#x2F;&gt;</span><br><span class="line">  &lt;&#x2F;typeHandlers&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="5-lt-objectFactory-gt-元素"><a href="#5-lt-objectFactory-gt-元素" class="headerlink" title="5.&lt;objectFactory&gt;元素"></a>5.<code>&lt;objectFactory&gt;</code>元素</h4><ul><li><p>MyBatis中默认的ObjectFactory的作用是实例化目标类，它既可以通过默认构造方法实例化，也可以在参数映射存在的时候通过参数构造方法来实例化。通常使用默认的ObjectFactory即可。</p></li><li><p>大部分场景下都不用配置和修改默认的ObjectFactory ，如果想覆盖ObjectFactory的默认行为，可以通过自定义ObjectFactory来实现，具体如下：</p></li></ul><p>1.自定义一个对象工厂</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">public class MyObjectFactory extends DefaultObjectFactory &#123;</span><br><span class="line">            private static final long serialVersionUID &#x3D; -4114845625429965832L;</span><br><span class="line">            public &lt;T&gt; T create(Class&lt;T&gt; type) &#123;</span><br><span class="line">	return super.create(type);</span><br><span class="line">            &#125;</span><br><span class="line">            public &lt;T&gt; T create(Class&lt;T&gt; type, List&lt;Class&lt;?&gt;&gt; constructorArgTypes,</span><br><span class="line">                         List&lt;Object&gt; constructorArgs) &#123;</span><br><span class="line">	return super.create(type, constructorArgTypes, constructorArgs);</span><br><span class="line">            &#125;</span><br><span class="line">            public void setProperties(Properties properties) &#123;</span><br><span class="line">	super.setProperties(properties);</span><br><span class="line">            &#125;</span><br><span class="line">            public &lt;T&gt; boolean isCollection(Class&lt;T&gt; type) &#123;</span><br><span class="line">	return Collection.class.isAssignableFrom(type);</span><br><span class="line">            &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>2.在配置文件中使用<code>&lt;objectFactory&gt;</code>元素配置自定义的ObjectFactory</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;objectFactory type&#x3D;&quot;com.dqsy.factory.MyObjectFactory&quot;&gt;</span><br><span class="line">     &lt;property name&#x3D;&quot;name&quot; value&#x3D;&quot;MyObjectFactory&quot;&#x2F;&gt;</span><br><span class="line">&lt;&#x2F;objectFactory&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li><code>由于自定义ObjectFactory在实际开发时不经常使用，了解即可。</code></li></ul><h4 id="6-lt-plugins-gt-元素"><a href="#6-lt-plugins-gt-元素" class="headerlink" title="6.&lt;plugins&gt;元素"></a>6.<code>&lt;plugins&gt;</code>元素</h4><ul><li>MyBatis允许在已映射语句执行过程中的某一点进行拦截调用，这种拦截调用是通过插件来实现的。<code>&lt;plugins&gt;</code>元素的作用就是配置用户所开发的插件。</li><li>如果用户想要进行插件开发，必须要先了解其内部运行原理，因为在试图修改或重写已有方法的行为时，很可能会破坏MyBatis原有的核心模块。关于插件的使用，只需了解<code>&lt;plugins&gt;</code>元素的作用即可，有兴趣的读者可以查找官方文档等资料自行学习。</li></ul><h4 id="7-lt-environments-gt-元素"><a href="#7-lt-environments-gt-元素" class="headerlink" title="7. &lt;environments&gt;元素"></a>7. <code>&lt;environments&gt;</code>元素</h4><ul><li><p><code>&lt;environments&gt;</code>元素用于对环境进行配置。MyBatis的环境配置实际上就是数据源的配置，我们可以通过<code>&lt;environments&gt;</code>元素配置多种数据源，即配置多种数据库。</p></li><li><p>使用<environments>元素进行环境配置的示例如下：</environments></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 6.environments配置环境</span><br><span class="line">		environment: 配置一个具体的环境。都需要一个事务管理器和一个数据源。</span><br><span class="line">		可以配置多个environments，id是当前环境的唯一标示</span><br><span class="line">		default&#x3D;&quot;development&quot; : 默认使用哪个环境</span><br><span class="line">		后来数据源和事务管理都是Spring来做</span><br><span class="line"> --&gt;	</span><br><span class="line">	&lt;environments default&#x3D;&quot;development&quot;&gt;</span><br><span class="line">    &lt;environment id&#x3D;&quot;development&quot;&gt;</span><br><span class="line">      &lt;transactionManager type&#x3D;&quot;JDBC&quot;&#x2F;&gt;</span><br><span class="line">      &lt;!-- 配置连接池  POOLED: 连接池--&gt;</span><br><span class="line">      &lt;dataSource type&#x3D;&quot;POOLED&quot;&gt;</span><br><span class="line">      	&lt;!-- $&#123;&#125;取出配置值 --&gt;</span><br><span class="line">        &lt;property name&#x3D;&quot;driver&quot; value&#x3D;&quot;$&#123;driverclass&#125;&quot;&#x2F;&gt;</span><br><span class="line">        &lt;property name&#x3D;&quot;url&quot; value&#x3D;&quot;$&#123;jdbcurl&#125;&quot;&#x2F;&gt;</span><br><span class="line">        &lt;property name&#x3D;&quot;username&quot; value&#x3D;&quot;$&#123;username&#125;&quot;&#x2F;&gt;</span><br><span class="line">        &lt;property name&#x3D;&quot;password&quot; value&#x3D;&quot;$&#123;password&#125;&quot;&#x2F;&gt;</span><br><span class="line">      &lt;&#x2F;dataSource&gt;</span><br><span class="line">    &lt;&#x2F;environment&gt;</span><br><span class="line">  &lt;&#x2F;environments&gt;</span><br></pre></td></tr></table></figure></li><li><p>在MyBatis中，可以配置两种类型的事务管理器，分别是JDBC和MANAGED。关于这两个事务管理器的描述如下：</p></li><li><p><code>JDBC</code>：此配置直接使用了JDBC的提交和回滚设置，它依赖于从数据源得到的连接来管理事务的作用域。</p></li><li><p><code>MANAGED</code>：此配置从来不提交或回滚一个连接，而是让容器来管理事务的整个生命周期。默认情况下，它会关闭连接，但一些容器并不希望这样，为此可以将closeConnection属性设置为false来阻止它默认的关闭行为。</p></li><li><p>注意：如果项目中使用的是Spring+ MyBatis，则没有必要在MyBatis中配置事务管理器，因为实际开发中，会使用Spring自带的管理器来实现事务管理</p></li></ul><h5 id="数据源的配置"><a href="#数据源的配置" class="headerlink" title="数据源的配置"></a>数据源的配置</h5><p>1.UNPOOLED</p><ul><li>配置此数据源类型后，在每次被请求时会打开和关闭连接。它对没有性能要求的简单应用程序是一个很好的选择。在使用时，需要配置5种属性。<br><img src="/posts/a7d5b03b/1-4-1-3.png"><br><img src="/posts/a7d5b03b/1-4-1-4.png"></li></ul><p>3.JNDI</p><ul><li>可以在EJB或应用服务器等容器中使用。容器可以集中或在外部配置数据源，然后放置一个JNDI上下文的引用。在使用时，需要配置2个属性。</li></ul><p><img src="/posts/a7d5b03b/1-4-1-5.png"></p><h4 id="8-lt-databaseIdProvider-gt-元素"><a href="#8-lt-databaseIdProvider-gt-元素" class="headerlink" title="8.&lt;databaseIdProvider&gt;元素"></a>8.<code>&lt;databaseIdProvider&gt;</code>元素</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 7.mybatis用来考虑数据库移植性的 ,例如ODBC和JDBC的语法不同，当切换数据库的时候会报错</span><br><span class="line">		type&#x3D;&quot;DB_VENDOR&quot;是固定的值</span><br><span class="line">--&gt; </span><br><span class="line">  	&lt;databaseIdProvider type&#x3D;&quot;DB_VENDOR&quot;&gt;</span><br><span class="line">  		&lt;!-- name&#x3D;&quot;&quot;:数据库厂商标识，value&#x3D;&quot;&quot;:给这个标识起一个好用的名字</span><br><span class="line">  			MySQL的标识：MySQL</span><br><span class="line">  			Oracle的标识：Oracle</span><br><span class="line">  			SQL Server的标识：SQL Server</span><br><span class="line">  		 --&gt;</span><br><span class="line">  		&lt;property name&#x3D;&quot;MySQL&quot; value&#x3D;&quot;mysql&quot;&#x2F;&gt;</span><br><span class="line">  		&lt;property name&#x3D;&quot;Oracle&quot; value&#x3D;&quot;oracle&quot;&#x2F;&gt;</span><br><span class="line">  		&lt;property name&#x3D;&quot;SQL Server&quot; value&#x3D;&quot;sqlserver&quot;&#x2F;&gt;</span><br><span class="line">  	&lt;&#x2F;databaseIdProvider&gt;</span><br></pre></td></tr></table></figure><p>EmployeeDao.xml写sql实例语句时加上databaseId</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"> 	&lt;select id&#x3D;&quot;getEmpById&quot; resultType&#x3D;&quot;com.lizhi.bean.Employee&quot; &gt;</span><br><span class="line"> 		&lt;!-- sql语句不要写分号 --&gt;</span><br><span class="line"> 		select * from t_employee where id&#x3D;#&#123;id&#125;</span><br><span class="line"> 	&lt;&#x2F;select&gt;</span><br><span class="line">&lt;!-- 如果能精确匹配，不能就用模糊的 </span><br><span class="line">  	&lt;select id&#x3D;&quot;getEmpById&quot; resultType&#x3D;&quot;com.lizhi.bean.Employee&quot; databaseId&#x3D;&quot;mysql&quot;&gt;</span><br><span class="line"> 		select * from t_employee where id&#x3D;#&#123;id&#125;</span><br><span class="line"> 	&lt;&#x2F;select&gt;</span><br><span class="line"></span><br><span class="line">   	&lt;select id&#x3D;&quot;getEmpById&quot; resultType&#x3D;&quot;com.lizhi.bean.Employee&quot; databaseId&#x3D;&quot;oracle&quot;&gt;</span><br><span class="line"> 		select * from t_employee where id&#x3D;#&#123;id&#125;</span><br><span class="line"> 	&lt;&#x2F;select&gt;</span><br><span class="line"></span><br><span class="line">   	&lt;select id&#x3D;&quot;getEmpById&quot; resultType&#x3D;&quot;com.lizhi.bean.Employee&quot; databaseId&#x3D;&quot;sqlserver&quot;&gt;</span><br><span class="line"> 		select * from t_employee where id&#x3D;#&#123;id&#125;</span><br><span class="line"> 	&lt;&#x2F;select&gt;</span><br><span class="line">--&gt;</span><br></pre></td></tr></table></figure><p>一般开发中都会提前确定好数据库的厂商，很少有改动的需求</p><h4 id="9-lt-mappers-gt-元素"><a href="#9-lt-mappers-gt-元素" class="headerlink" title="9.&lt;mappers&gt;元素"></a>9.<code>&lt;mappers&gt;</code>元素</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 8.写好的Sql映射文件需要使用mappers注册进来 --&gt;</span><br><span class="line"> 	&lt;mappers&gt;</span><br><span class="line"> 		&lt;!-- </span><br><span class="line"> 			url: 可以从磁盘或者网络路径引用</span><br><span class="line"> 			resource: 在类路径下找sql映射文件</span><br><span class="line"> 			class: 直接引用接口的全类名，可以将接口的实例化配置文件放在和接口同一个包下，且文件名和接口名一致</span><br><span class="line"> 			class的另一种方法；</span><br><span class="line"> 		 --&gt;</span><br><span class="line"> 		 &lt;!-- &lt;mapper resource&#x3D;&quot;mybatis&#x2F;EmployeeDao.xml&quot;&#x2F;&gt; --&gt;</span><br><span class="line"> 		&lt;!-- &lt;mapper class&#x3D;&quot;com.lizhi.dao.EmployeeDao&quot;&#x2F;&gt; --&gt;</span><br><span class="line"> 		 &lt;!-- &lt;mapper class&#x3D;&quot;com.lizhi.dao.EmployeeDaoAnnotation&quot;&#x2F;&gt; --&gt;</span><br><span class="line"> 		 &lt;!-- 常规的配置方法和注解方法配合使用</span><br><span class="line"> 		 	重要的Dao可以写配置，简单的Dao就直接写注解</span><br><span class="line"> 		  --&gt;</span><br><span class="line"> 		&lt;!-- 批量注册name&#x3D;&quot;&quot;,Dao所在包名</span><br><span class="line"> 			这里有个问题；批量扫描只能扫描指定的包名，而不能扫描位于conf&#x2F;mybatis&#x2F;EmployeeDao.xml路径下的</span><br><span class="line"> 			EmployeeDao文件，这时将包名mybatis改成com.lizhi.dao虽然看起来是两个包，但是从类路径来看是一个包</span><br><span class="line"> 			因此都可以扫描</span><br><span class="line"> 		 --&gt;</span><br><span class="line"> 		&lt;package name&#x3D;&quot;com.lizhi.dao&quot;&#x2F;&gt;</span><br><span class="line"> 	&lt;&#x2F;mappers&gt;</span><br></pre></td></tr></table></figure><p>1.使用类路径引入</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;mappers&gt;</span><br><span class="line">    &lt;mapper resource&#x3D;&quot;com&#x2F;dqsy&#x2F;mapper&#x2F;UserMapper.xml&quot;&#x2F;&gt;</span><br><span class="line">&lt;&#x2F;mappers&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>2.使用本地文件路径引入</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;mappers&gt;</span><br><span class="line">    &lt;mapper url&#x3D;&quot;file:&#x2F;&#x2F;&#x2F;D:&#x2F;com&#x2F;dqsy&#x2F;mapper&#x2F;UserMapper.xml&quot;&#x2F;&gt;</span><br><span class="line">&lt;&#x2F;mappers&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>3.使用接口类引入<br>可以将接口的实例化配置文件放在和接口同一个包下，且文件名和接口名一致</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;mappers&gt;</span><br><span class="line">    &lt;mapper class&#x3D;&quot;com.dqsy.mapper.UserMapper&quot;&#x2F;&gt;</span><br><span class="line">&lt;&#x2F;mappers&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>4.使用包名引入</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;mappers&gt;</span><br><span class="line">    &lt;package name&#x3D;&quot;com.dqsy.mapper&quot;&#x2F;&gt;</span><br><span class="line">&lt;&#x2F;mappers&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="1-4-2-映射文件的主要元素介绍"><a href="#1-4-2-映射文件的主要元素介绍" class="headerlink" title="1.4.2 映射文件的主要元素介绍"></a><h id="1.4.2">1.4.2 映射文件的主要元素介绍</h></h3><blockquote><p>实例中对应的EmployeeDao.xml</p></blockquote><ul><li>在映射文件中，<code>&lt;mapper&gt;</code>元素是映射文件的根元素，其他元素都是它的子元素。</li></ul><p><img src="/posts/a7d5b03b/1-4-1-6.png"></p><h4 id="1-lt-select-gt-元素"><a href="#1-lt-select-gt-元素" class="headerlink" title="1.&lt;select&gt;元素"></a>1.<code>&lt;select&gt;元素</code></h4><ul><li><p><code>&lt;select&gt;</code>元素用来映射查询语句，它可以帮助我们从数据库中读取出数据，并组装数据给业务开发人员。</p></li><li><p>使用<code>&lt;select&gt;</code>元素执行查询操作非常简单，其示例如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- public Employee getEmpById(Integer id); --&gt;</span><br><span class="line">	&lt;select id&#x3D;&quot;getEmpById&quot; resultType&#x3D;&quot;com.lizhi.bean.Employee&quot;&gt;</span><br><span class="line">		SELECT * FROM t_employee WHERE id&#x3D;#&#123;id&#125;</span><br><span class="line">	&lt;&#x2F;select&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul><h4 id="传参问题"><a href="#传参问题" class="headerlink" title="传参问题"></a><h id="1.4.2.1">传参问题</h></h4><p><a href="#1.4.2.2.1">EmployeeDao.xml</a></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line">  </span><br><span class="line">&lt;!-- 传参到底能传哪些 --&gt; </span><br><span class="line">&lt;!-- public Employee getEmpById(Integer id); --&gt;</span><br><span class="line">	&lt;select id&#x3D;&quot;getEmpById&quot; resultType&#x3D;&quot;com.lizhi.bean.Employee&quot;&gt;</span><br><span class="line">		SELECT * FROM t_employee WHERE id&#x3D;#&#123;id&#125;</span><br><span class="line">	&lt;&#x2F;select&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--</span><br><span class="line">如果采用没有采用@param的方式 id&#x3D;#&#123;id&#125; and empname&#x3D;#&#123;empname&#125;的方式来传入参数会报如下异常</span><br><span class="line"> org.apache.ibatis.exceptions.PersistenceException: </span><br><span class="line">### Error querying database.  Cause: org.apache.ibatis.binding.BindingException: </span><br><span class="line">Parameter &#39;id&#39; not found. Available parameters are [arg1, arg0, param1, param2]</span><br><span class="line">而改成id&#x3D;#&#123;param1&#125; and empname&#x3D;#&#123;param2&#125;或者改成arg1, arg0则可运行（param1, param2，param3, param4）</span><br><span class="line"> --&gt;</span><br><span class="line">&lt;!-- public Employee getEmpByIdAndEmpname(Integer id,String empname); --&gt;</span><br><span class="line">	&lt;select id&#x3D;&quot;getEmpByIdAndEmpname&quot; resultType&#x3D;&quot;com.lizhi.bean.Employee&quot;&gt;</span><br><span class="line">		select * from t_employee where id&#x3D;#&#123;id&#125; and empname&#x3D;#&#123;empname&#125;</span><br><span class="line">	&lt;&#x2F;select&gt;</span><br><span class="line">	</span><br><span class="line">&lt;!-- public Employee getEmployeeAndEmpname(Map&lt;String, Override&gt;map); --&gt;</span><br><span class="line">	&lt;select id&#x3D;&quot;getEmployeeAndEmpname&quot; resultType&#x3D;&quot;com.lizhi.bean.Employee&quot;&gt;</span><br><span class="line">		select * from $&#123;tablename&#125; where id&#x3D;#&#123;id&#125; and empname&#x3D;#&#123;empname&#125;</span><br><span class="line">	&lt;&#x2F;select&gt;</span><br><span class="line">	</span><br><span class="line">&lt;!-- 现象：</span><br><span class="line">	1.传入单个参数：</span><br><span class="line">		①基本类型：</span><br><span class="line">			取值：#&#123;随便写&#125;</span><br><span class="line">		②传入pojo:</span><br><span class="line">	2.多个参数：</span><br><span class="line">		public Employee getEmpByIdAndEmpname(Integer id,String empname);</span><br><span class="line">		取值：#&#123;参数名&#125;的方式无效</span><br><span class="line">		可以用id&#x3D;#&#123;param1&#125; and empname&#x3D;#&#123;param2&#125;或者改成arg1, arg0的方式</span><br><span class="line">		原因：只要传入了多个参数MyBatis会自动的将这些参数封装在map中，封装是使用的key就是参数的索引和参数的第几个表示</span><br><span class="line">			Map&lt;String,Object&gt; map &#x3D; new HashMap&lt;&gt;();</span><br><span class="line">			map.put(&quot;arg1&quot;,传入的值);map.put(&quot;arg1&quot;,&quot;传入的值&quot;)；</span><br><span class="line">		#&#123;Key&#125;就是从map中取值</span><br><span class="line">	3.@param:为参数指定key;命名参数；推荐使用此方法</span><br><span class="line">	 我们可以告诉MyBatis，封装参数map的时候别乱来，使用我们指定的Key</span><br><span class="line">		public Employee getEmpByIdAndEmpname(@Param(&quot;id&quot;)Integer id,@Param(&quot;empname&quot;)String empname);</span><br><span class="line">	4.传入pojo(javaBean)</span><br><span class="line">		取值：#&#123;pojo的属性名&#125;</span><br><span class="line">	5.传入map:将多个要使用的参数封装起来</span><br><span class="line">		取值：#&#123;key&#125;</span><br><span class="line">	扩展：多个参数：自动封装map;多种方式混合</span><br><span class="line">	method01(@param(&quot;id&quot;)Integer id,String empname,Employee employee);</span><br><span class="line">	Integwe id -&gt;#&#123;id&#125;</span><br><span class="line">	String empname -&gt; #&#123;param2&#125;</span><br><span class="line">	Employee employee (取出这个里面的email) -&gt;#&#123;param3.email&#125;</span><br><span class="line">	</span><br><span class="line">	无论传入什么参数都要能正确的取出值；</span><br><span class="line">	#&#123;key&#x2F;属性名&#125;</span><br><span class="line">	1. #&#123;key&#125;取值的时候可以设置一些规则</span><br><span class="line">		id&#x3D;#&#123;id,jdbcType&#x3D;INTEFER&#125;都是自动配置的所以可以不写</span><br><span class="line">		javaType,jdbcType,mode,numericScale,resultMap.typeHandler,jdbcTypeName,expression</span><br><span class="line">		只有jdbcType才可能是需要被指定的，默认不指定jdbcType，mysql没问题，oracle没问题，</span><br><span class="line">		万一传入的数据是null,mysql插入null没问题，【oracle不指定null到底是什么类型】</span><br><span class="line">	</span><br><span class="line">	实际上在MyBatis中，有两种取值方式：</span><br><span class="line">		#&#123;属性名&#125;: 是参数预编译的方式，参数的位置都是用？替代，参数后来都是预编译设置进去的；安全，不会有sql注入的问题</span><br><span class="line">		$&#123;属性名&#125;: 不是参数预编译，而是直接和sql语句进行拼串；不安全，就是将参数直接放在指定的位置运行</span><br><span class="line">				 &#x2F;&#x2F;id&#x3D; &#39;传入的字符串&#39; and empname&#x3D;</span><br><span class="line">				  如果传入&#39;1 or 1&#x3D;1 or&#39;，则不管and后面有没有东西or 后面的 1&#x3D;1永远是true，就会通过验证访问数据库的内容，这就是sql注入</span><br><span class="line">				$&#123;属性名&#125;用处：sql语句只有参数位置是支持预编译的,表名等不支持预编译；假设有一个数据库里面有两张日志表</span><br><span class="line">					log_2019_11,log_2019_12</span><br><span class="line">					select * from log_2019_11 where id&#x3D;? and empname&#x3D;?</span><br><span class="line">					需求，id,empname固定查询不同日志表里的日志</span><br><span class="line">				解决办法：在getEmployeeAndEmpname方法里测试</span><br><span class="line">					采取这种方法可行select * from $&#123;tablename&#125; where id&#x3D;#&#123;id&#125; and empname&#x3D;#&#123;empname&#125;</span><br><span class="line">					</span><br><span class="line">		在getEmployeeAndEmpname方法里测试</span><br><span class="line">		id&#x3D;$&#123;id&#125; and empname&#x3D;#&#123;empname&#125;</span><br><span class="line">		打印的日志	select * from t_employee where id&#x3D;1 and empname&#x3D;? </span><br><span class="line">		</span><br><span class="line">		id&#x3D;#&#123;id&#125; and empname&#x3D;#&#123;empname&#125;</span><br><span class="line">		打印的日志 select * from t_employee where id&#x3D;? and empname&#x3D;?</span><br><span class="line">		</span><br><span class="line">		一般使用#&#123;&#125;因为安全，在不支持参数预编译的位置要进行取值就使用$&#123;&#125;;</span><br><span class="line">--&gt;	</span><br><span class="line">	</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 查询所有员工public List&lt;Employee&gt; getAllEmps(); --&gt;</span><br><span class="line">	&lt;!-- resultType&#x3D;&quot;&quot;如果返回的是个集合，写的是集合里面的元素的类型 --&gt;	</span><br><span class="line">	&lt;select id&#x3D;&quot;getAllEmps&quot; resultType&#x3D;&quot;com.lizhi.bean.Employee&quot;&gt;</span><br><span class="line">		select * from t_employee</span><br><span class="line">	&lt;&#x2F;select&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 查询返回map --&gt;	</span><br><span class="line">	&lt;!-- public Map&lt;String, Object&gt; getEmpByIdReturnMap(Integer id); --&gt;</span><br><span class="line">	&lt;select id&#x3D;&quot;getEmpByIdReturnMap&quot; resultType&#x3D;&quot;map&quot;&gt;</span><br><span class="line">		select * from t_employee where id&#x3D;#&#123;id&#125;	</span><br><span class="line">	&lt;&#x2F;select&gt;</span><br><span class="line">	&lt;!-- 查询多个返回一个map ，查询多个情况下，集合里面写元素类型</span><br><span class="line">		public Map&lt;Integer, Employee&gt; getEmpsReturnMap(); --&gt;</span><br><span class="line">	&lt;select id&#x3D;&quot;getEmpsReturnMap&quot; resultType&#x3D;&quot;com.lizhi.bean.Employee&quot;&gt;</span><br><span class="line">		select * from t_employee </span><br><span class="line">	&lt;&#x2F;select&gt;</span><br><span class="line">	</span><br></pre></td></tr></table></figure><h4 id="数据库列名与Bean的属性名不对应时的查询方式详见-lt-resultMap-gt-元素"><a href="#数据库列名与Bean的属性名不对应时的查询方式详见-lt-resultMap-gt-元素" class="headerlink" title="数据库列名与Bean的属性名不对应时的查询方式详见&lt;resultMap&gt;元素"></a>数据库列名与Bean的属性名不对应时的查询方式详见<a href="#1.4.2.4"><code>&lt;resultMap&gt;</code>元素</a></h4><h5 id="lt-select-gt-元素的常用属性"><a href="#lt-select-gt-元素的常用属性" class="headerlink" title="&lt;select&gt;元素的常用属性"></a><code>&lt;select&gt;</code>元素的常用属性</h5><p><img src="/posts/a7d5b03b/1-4-1-7.png"></p><h4 id="增删改查常用属性"><a href="#增删改查常用属性" class="headerlink" title="增删改查常用属性"></a>增删改查常用属性</h4><p><img src="/posts/a7d5b03b/1-4-2-1.png"></p><h4 id="2-lt-insert-gt-元素"><a href="#2-lt-insert-gt-元素" class="headerlink" title="2. &lt;insert&gt;元素"></a>2. <code>&lt;insert&gt;</code>元素</h4><ul><li><code>&lt;insert&gt;</code>元素用于映射插入语句，在执行完元素中定义的SQL语句后，会返回一个表示插入记录数的整数。</li><li><insert>元素的配置示例如下：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;insert</span><br><span class="line">      id&#x3D;&quot;addCustomer&quot;</span><br><span class="line">      parameterType&#x3D;&quot;com.dqsy.po.Customer&quot;</span><br><span class="line">      flushCache&#x3D;&quot;true&quot;</span><br><span class="line">      statementType&#x3D;&quot;PREPARED&quot;</span><br><span class="line">      keyProperty&#x3D;&quot;&quot;</span><br><span class="line">      keyColumn&#x3D;&quot;&quot;</span><br><span class="line">      useGeneratedKeys&#x3D;&quot;&quot;</span><br><span class="line">      timeout&#x3D;&quot;20&quot;&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure></insert></li></ul><h5 id="元素的属性"><a href="#元素的属性" class="headerlink" title="元素的属性"></a><insert>元素的属性</insert></h5><ul><li><code>&lt;insert&gt;</code>元素的属性与<code>&lt;select&gt;</code>元素的属性大部分相同，但还包含了3个特有属性，这3个属性的描述如下所示。</li></ul><p><img src="/posts/a7d5b03b/1-4-1-8.png"></p><ul><li>执行插入操作后，很多时候需要返回插入成功的数据生成的主键值，此时就可以通过上面讲解的3个属性来实现。</li></ul><h5 id="2-1-对于支持主键自助增长的数据库（如MySQL），可以通过如下配置实现："><a href="#2-1-对于支持主键自助增长的数据库（如MySQL），可以通过如下配置实现：" class="headerlink" title="2.1 对于支持主键自助增长的数据库（如MySQL），可以通过如下配置实现："></a>2.1 对于支持主键自助增长的数据库（如MySQL），可以通过如下配置实现：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;!-- public int insertEmployee(Employee employee); --&gt;</span><br><span class="line">	&lt;!-- 让Mybatis自动的将自增的id赋值给传入的employee对象的id的属性 </span><br><span class="line">		useGeneratedKeys&#x3D;”true”：原生jdbc获取自增主键的方法</span><br><span class="line">		keyProperty&#x3D;&quot;&quot;:将刚才自增的id赋值给那个属性</span><br><span class="line">	--&gt;</span><br><span class="line">	&lt;insert id&#x3D;&quot;insertEmployee&quot;  useGeneratedKeys&#x3D;&quot;true&quot; keyProperty&#x3D;&quot;id&quot;&gt;</span><br><span class="line">		INSERT INTO t_employee(empname,gender,email) VALUES(#&#123;empname&#125;,#&#123;gender&#125;,#&#123;email&#125;)</span><br><span class="line">	&lt;&#x2F;insert&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="2-2对于不支持主键自助增长的数据库-如Oracle-，可以通过如下配置实现："><a href="#2-2对于不支持主键自助增长的数据库-如Oracle-，可以通过如下配置实现：" class="headerlink" title="2.2对于不支持主键自助增长的数据库(如Oracle)，可以通过如下配置实现："></a>2.2对于不支持主键自助增长的数据库(如Oracle)，可以通过如下配置实现：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- public int insertEmployee2(Employee employee); --&gt;</span><br><span class="line">	&lt;insert id&#x3D;&quot;insertEmployee2&quot;&gt;</span><br><span class="line">	&lt;!-- 对于不支持自增主键的数据库采用查询主键的方式</span><br><span class="line">			order&#x3D;&quot;BEFORE&quot;:在插入sql语句执行之前查询id</span><br><span class="line">				在核心sql语句之前先运行一个查询个查询sql查到id,将查到的id赋值给JavaBean的哪个属性；</span><br><span class="line">				获取最大的id值再+1赋值给id达到自增的目的</span><br><span class="line">		 --&gt;</span><br><span class="line">		&lt;selectKey order&#x3D;&quot;BEFORE&quot; resultType&#x3D;&quot;integer&quot; keyProperty&#x3D;&quot;id&quot;&gt;</span><br><span class="line">			select max(id)+1 from t_employee		</span><br><span class="line">		&lt;&#x2F;selectKey&gt;</span><br><span class="line">		INSERT INTO t_employee(id,empname,gender,email) VALUES(#&#123;id&#125;,#&#123;empname&#125;,#&#123;gender&#125;,#&#123;email&#125;)</span><br><span class="line">	&lt;&#x2F;insert&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="3-lt-update-gt-元素和-lt-delete-gt-元素"><a href="#3-lt-update-gt-元素和-lt-delete-gt-元素" class="headerlink" title="3.&lt;update&gt;元素和&lt;delete&gt;元素"></a>3.<code>&lt;update&gt;</code>元素和<code>&lt;delete&gt;</code>元素</h4><ul><li><code>&lt;update&gt;</code>和<code>&lt;delete&gt;</code>元素的使用比较简单，它们的属性配置也基本相同。</li></ul><h5 id="lt-update-gt-和-lt-delete-gt-元素的常用属性如下："><a href="#lt-update-gt-和-lt-delete-gt-元素的常用属性如下：" class="headerlink" title="&lt;update&gt;和&lt;delete&gt;元素的常用属性如下："></a><code>&lt;update&gt;</code>和<code>&lt;delete&gt;</code>元素的常用属性如下：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;update</span><br><span class="line">      id&#x3D;&quot;updateCustomer&quot;</span><br><span class="line">      parameterType&#x3D;&quot;com.dqsy.po.Customer&quot;</span><br><span class="line">      flushCache&#x3D;&quot;true&quot;</span><br><span class="line">      statementType&#x3D;&quot;PREPARED&quot;</span><br><span class="line">      timeout&#x3D;&quot;20&quot;&gt;</span><br><span class="line">&lt;delete</span><br><span class="line">      id&#x3D;&quot;deleteCustomer&quot;</span><br><span class="line">      parameterType&#x3D;&quot;com.dqsy.po.Customer&quot;</span><br><span class="line">      flushCache&#x3D;&quot;true&quot;</span><br><span class="line">      statementType&#x3D;&quot;PREPARED&quot;</span><br><span class="line">      timeout&#x3D;&quot;20&quot;&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="lt-update-gt-和-lt-delete-gt-元素的使用示例如下："><a href="#lt-update-gt-和-lt-delete-gt-元素的使用示例如下：" class="headerlink" title="&lt;update&gt;和&lt;delete&gt;元素的使用示例如下："></a><code>&lt;update&gt;</code>和<code>&lt;delete&gt;</code>元素的使用示例如下：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;update id&#x3D;&quot;updateCustomer&quot; parameterType&#x3D;&quot;com.dqsy.po.Customer&quot;&gt;</span><br><span class="line">       update t_customer </span><br><span class="line">       set username&#x3D;#&#123;username&#125;,jobs&#x3D;#&#123;jobs&#125;,phone&#x3D;#&#123;phone&#125;</span><br><span class="line">       where id&#x3D;#&#123;id&#125;</span><br><span class="line">&lt;&#x2F;update&gt;</span><br><span class="line"></span><br><span class="line">&lt;delete id&#x3D;&quot;deleteCustomer&quot; parameterType&#x3D;&quot;Integer&quot;&gt;</span><br><span class="line">        delete from t_customer where id&#x3D;#&#123;id&#125;</span><br><span class="line">&lt;&#x2F;delete&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="lt-sql-gt-元素"><a href="#lt-sql-gt-元素" class="headerlink" title="&lt;sql&gt;元素"></a><code>&lt;sql&gt;</code>元素</h4><blockquote><pre><code>    在一个映射文件中，通常需要定义多条SQL语句，这些SQL语句的组成可能有一部分是相同的（如多条select语句中都查询相同的id、username、jobs字段），如果每一个SQL语句都重写一遍相同的部分，势必会增加代码量，导致映射文件过于臃肿。那么有没有什么办法将这些SQL语句中相同的组成部分抽取出来，然后在需要的地方引用呢？
</code></pre></blockquote><ul><li><p><sql>元素的作用就是定义可重用的SQL代码片段，然后在其他语句中引用这一代码片段。</sql></p></li><li><p>定义一个包含id、username、jobs和phone字段的代码片段如下：</p></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;sql id&#x3D;&quot;customerColumns&quot;&gt;id,username,jobs,phone&lt;&#x2F;sql&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>上述代码片段可以包含在其他语句中使用，具体如下：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;select id&#x3D;&quot;findCustomerById&quot; parameterType&#x3D;&quot;Integer&quot;</span><br><span class="line">            resultType&#x3D;&quot;com.dqsy.po.Customer&quot;&gt;</span><br><span class="line">    select &lt;include refid&#x3D;&quot;customerColumns&quot;&#x2F;&gt;</span><br><span class="line">    from t_customer </span><br><span class="line">    where id &#x3D; #&#123;id&#125;</span><br><span class="line">&lt;&#x2F;select&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="定义sql片段"><a href="#定义sql片段" class="headerlink" title="定义sql片段"></a>定义sql片段</h5></li></ul><p><img src="/posts/a7d5b03b/1-4-1-9.png"></p><h4 id="4-lt-resultMap-gt-元素"><a href="#4-lt-resultMap-gt-元素" class="headerlink" title="4.&lt;resultMap&gt;元素"></a>4.<h id="1.4.2.4"><code>&lt;resultMap&gt;</code>元素</h></h4><ul><li><code>&lt;resultMap&gt;</code>元素表示结果映射集，是MyBatis中最重要也是最强大的元素。它的主要作用是定义映射规则、级联的更新以及定义类型转化器等。<br><a href="#1.4.2.2.2">CatDao.xml</a><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&lt;mapper namespace&#x3D;&quot;com.lizhi.dao.CatDao&quot;&gt;</span><br><span class="line">&lt;!-- public cat getCatById(Integer id); --&gt;</span><br><span class="line">	&lt;!-- resultType&#x3D;&quot;com.lizhi.bean.Cat&quot;:使用默认规则，属性名列名一一对应</span><br><span class="line">		 resultMap&#x3D;&quot;myCat&quot;:查出数据封装结果的时候，使用myCat自定义的结果集，</span><br><span class="line">	 --&gt;</span><br><span class="line">	&lt;select id&#x3D;&quot;getCatById&quot; resultMap&#x3D;&quot;myCat&quot;&gt;</span><br><span class="line">		&lt;!-- 这样可以用起别名的方法配合resultType&#x3D;&quot;com.lizhi.bean.Cat&quot;:使用默认规则，属性名列名一一对应</span><br><span class="line">		 select id,cname name,cAge age,cgender gender from t_cat where id&#x3D;#&#123;id&#125; --&gt;</span><br><span class="line">		&lt;!-- 这样不可以用 --&gt;</span><br><span class="line">		select * from t_cat where id&#x3D;#&#123;id&#125;</span><br><span class="line">	&lt;&#x2F;select&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;!-- 自定义结果集(resultMap)，自己定义每一列数据和JavaBean的映射规则</span><br><span class="line">		type&#x3D;&quot;&quot; :制定要为哪个JavaBean自定义封装规则,全类名</span><br><span class="line">		id&#x3D;&quot;&quot;:唯一标识</span><br><span class="line">	 --&gt;</span><br><span class="line">	&lt;resultMap type&#x3D;&quot;com.lizhi.bean.Cat&quot; id&#x3D;&quot;myCat&quot;&gt;</span><br><span class="line">		&lt;!-- 指定主键列的对应规则 </span><br><span class="line">			column&#x3D;&quot;id&quot;:指定那一列是主键列</span><br><span class="line">			property&#x3D;&quot;&quot;:指定Cat.java文件里的哪个属性封装id这一列数据</span><br><span class="line">		--&gt;</span><br><span class="line">		&lt;id property&#x3D;&quot;id&quot; column&#x3D;&quot;id&quot;&#x2F;&gt;</span><br><span class="line">		&lt;!-- 普通列 --&gt;</span><br><span class="line">		&lt;result property&#x3D;&quot;name&quot; column&#x3D;&quot;cName&quot;&#x2F;&gt;</span><br><span class="line">		&lt;result property&#x3D;&quot;age&quot; column&#x3D;&quot;cAge&quot;&#x2F;&gt;</span><br><span class="line">		&lt;result property&#x3D;&quot;gender&quot; column&#x3D;&quot;cgender&quot;&#x2F;&gt;</span><br><span class="line">		</span><br><span class="line">		&lt;association property&#x3D;&quot;&quot;&gt;&lt;&#x2F;association&gt;</span><br><span class="line">	&lt;&#x2F;resultMap&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul><ul><li><code>&lt;resultMap&gt;</code>元素中包含了一些子元素，它的元素结构如下所示：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;resultMap type&#x3D;&quot;&quot; id&#x3D;&quot;&quot;&gt;</span><br><span class="line">       &lt;constructor&gt;    &lt;!-- 类在实例化时,用来注入结果到构造方法中--&gt;</span><br><span class="line">             &lt;idArg&#x2F;&gt;      &lt;!-- ID参数;标记结果作为ID--&gt;</span><br><span class="line">             &lt;arg&#x2F;&gt;          &lt;!-- 注入到构造方法的一个普通结果--&gt;</span><br><span class="line">       &lt;&#x2F;constructor&gt;  </span><br><span class="line">       &lt;id&#x2F;&gt;                 &lt;!-- 用于表示哪个列是主键--&gt;</span><br><span class="line">       &lt;result&#x2F;&gt;           &lt;!-- 注入到字段或JavaBean属性的普通结果--&gt;</span><br><span class="line">       &lt;association property&#x3D;&quot;&quot; &#x2F;&gt;        &lt;!-- 用于一对一关联 --&gt;</span><br><span class="line">       &lt;collection property&#x3D;&quot;&quot; &#x2F;&gt;          &lt;!-- 用于一对多关联 --&gt;</span><br><span class="line">       &lt;discriminator javaType&#x3D;&quot;&quot;&gt;      &lt;!-- 使用结果值来决定使用哪个结果映射--&gt;</span><br><span class="line">            &lt;case value&#x3D;&quot;&quot; &#x2F;&gt;                   &lt;!-- 基于某些值的结果映射 --&gt;</span><br><span class="line">       &lt;&#x2F;discriminator&gt;	</span><br><span class="line">&lt;&#x2F;resultMap&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul><h2 id="源码"><a href="#源码" class="headerlink" title="源码"></a>源码</h2><h3 id="1-3-3-Hello测试实例完整代码"><a href="#1-3-3-Hello测试实例完整代码" class="headerlink" title="1.3.3 Hello测试实例完整代码"></a><h id="1.3.3">1.3.3 Hello测试实例完整代码</h></h3><p><img src="/posts/a7d5b03b/1-3-4-1.png"><br><img src="/posts/a7d5b03b/1-3-4-2.png"></p><h4 id="包com-lizhi-bean"><a href="#包com-lizhi-bean" class="headerlink" title="包com.lizhi.bean"></a>包com.lizhi.bean</h4><h4 id="Employee-java"><a href="#Employee-java" class="headerlink" title="Employee.java"></a>Employee.java</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">package com.lizhi.bean;</span><br><span class="line"></span><br><span class="line">public class Employee &#123;</span><br><span class="line"></span><br><span class="line">	private Integer id;</span><br><span class="line">	private String empname;</span><br><span class="line">	private String email;</span><br><span class="line">	private Integer gender;</span><br><span class="line">	public Integer getId() &#123;</span><br><span class="line">		return id;</span><br><span class="line">	&#125;</span><br><span class="line">	public void setId(Integer id) &#123;</span><br><span class="line">		this.id &#x3D; id;</span><br><span class="line">	&#125;</span><br><span class="line">	public String getEmpname() &#123;</span><br><span class="line">		return empname;</span><br><span class="line">	&#125;</span><br><span class="line">	public void setEmpname(String empname) &#123;</span><br><span class="line">		this.empname &#x3D; empname;</span><br><span class="line">	&#125;</span><br><span class="line">	public String getEmail() &#123;</span><br><span class="line">		return email;</span><br><span class="line">	&#125;</span><br><span class="line">	public void setEmail(String email) &#123;</span><br><span class="line">		this.email &#x3D; email;</span><br><span class="line">	&#125;</span><br><span class="line">	public Integer getGender() &#123;</span><br><span class="line">		return gender;</span><br><span class="line">	&#125;</span><br><span class="line">	public void setGender(Integer gender) &#123;</span><br><span class="line">		this.gender &#x3D; gender;</span><br><span class="line">	&#125;</span><br><span class="line">	@Override</span><br><span class="line">	public String toString() &#123;</span><br><span class="line">		return &quot;Employee [id&#x3D;&quot; + id + &quot;, empname&#x3D;&quot; + empname + &quot;, email&#x3D;&quot; + email + &quot;, gender&#x3D;&quot; + gender + &quot;]&quot;;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="包com-lizhi-bean-Dao"><a href="#包com-lizhi-bean-Dao" class="headerlink" title="包com.lizhi.bean.Dao"></a>包com.lizhi.bean.Dao</h4><h4 id="接口EmployeeDao-java"><a href="#接口EmployeeDao-java" class="headerlink" title="接口EmployeeDao.java"></a>接口EmployeeDao.java</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">package com.lizhi.bean.Dao;</span><br><span class="line"></span><br><span class="line">import com.lizhi.bean.Employee;</span><br><span class="line"></span><br><span class="line">public interface EmployeeDao &#123;</span><br><span class="line"></span><br><span class="line">	&#x2F;&#x2F;按照员工的ID查询</span><br><span class="line">	public Employee getEmpById(Integer id);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="配置文件EmployeeDao-xml"><a href="#配置文件EmployeeDao-xml" class="headerlink" title="配置文件EmployeeDao.xml"></a>配置文件EmployeeDao.xml</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;!DOCTYPE mapper</span><br><span class="line">  PUBLIC &quot;-&#x2F;&#x2F;mybatis.org&#x2F;&#x2F;DTD Mapper 3.0&#x2F;&#x2F;EN&quot;</span><br><span class="line">  &quot;http:&#x2F;&#x2F;mybatis.org&#x2F;dtd&#x2F;mybatis-3-mapper.dtd&quot;&gt;</span><br><span class="line"></span><br><span class="line"> &lt;!-- namespace : 名称空间，写接口的全类名，相当于告诉MyBatis这个配置文件是实现哪个接口的 --&gt;</span><br><span class="line">&lt;mapper namespace&#x3D;&quot;com.lizhi.bean.Dao.EmployeeDao&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- public Employee getEmpById(Integer id); --&gt;</span><br><span class="line">	&lt;!--</span><br><span class="line">	select，用来定义一个查询操作  ,</span><br><span class="line">	id:是方法名，相当于这个配置是对于某个方法的实现类</span><br><span class="line">	resultType: 指定方法运行后的返回值类型；（查询操作必须指定）</span><br><span class="line">	#&#123;属性名&#125;: 代表取出传递过来的某个参数的的值</span><br><span class="line">	--&gt;</span><br><span class="line">  &lt;select id&#x3D;&quot;getEmpById&quot; resultType&#x3D;&quot;com.lizhi.bean.Employee&quot;&gt;</span><br><span class="line">    select * from t_employee where id&#x3D;#&#123;id&#125;</span><br><span class="line">  &lt;&#x2F;select&gt;</span><br><span class="line">&lt;&#x2F;mapper&gt;</span><br></pre></td></tr></table></figure><h4 id="mybatis-config-xml"><a href="#mybatis-config-xml" class="headerlink" title="mybatis-config.xml"></a>mybatis-config.xml</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;UTF-8&quot; ?&gt;</span><br><span class="line">&lt;!DOCTYPE configuration</span><br><span class="line">  PUBLIC &quot;-&#x2F;&#x2F;mybatis.org&#x2F;&#x2F;DTD Config 3.0&#x2F;&#x2F;EN&quot;</span><br><span class="line">  &quot;http:&#x2F;&#x2F;mybatis.org&#x2F;dtd&#x2F;mybatis-3-config.dtd&quot;&gt;</span><br><span class="line">&lt;configuration&gt;</span><br><span class="line">  &lt;environments default&#x3D;&quot;development&quot;&gt;</span><br><span class="line">    &lt;environment id&#x3D;&quot;development&quot;&gt;</span><br><span class="line">      &lt;transactionManager type&#x3D;&quot;JDBC&quot;&#x2F;&gt;</span><br><span class="line">      &lt;!-- 配置连接池 --&gt;</span><br><span class="line">      &lt;dataSource type&#x3D;&quot;POOLED&quot;&gt;</span><br><span class="line">        &lt;property name&#x3D;&quot;driver&quot; value&#x3D;&quot;com.mysql.cj.jdbc.Driver&quot;&#x2F;&gt;</span><br><span class="line">        &lt;property name&#x3D;&quot;url&quot; value&#x3D;&quot;jdbc:mysql:&#x2F;&#x2F;localhost:3306&#x2F;mybatis_0325?serverTimezone&#x3D;GMT%2B8&quot;&#x2F;&gt;</span><br><span class="line">        &lt;property name&#x3D;&quot;username&quot; value&#x3D;&quot;root&quot;&#x2F;&gt;</span><br><span class="line">        &lt;property name&#x3D;&quot;password&quot; value&#x3D;&quot;******&quot;&#x2F;&gt;</span><br><span class="line">      &lt;&#x2F;dataSource&gt;</span><br><span class="line">    &lt;&#x2F;environment&gt;</span><br><span class="line">  &lt;&#x2F;environments&gt;</span><br><span class="line"></span><br><span class="line"> &lt;!-- 引入我们自己编写的每一个接口的实现文件 --&gt;</span><br><span class="line">  &lt;mappers&gt;</span><br><span class="line">  	&lt;!-- resource: 表示从类路径下找资源 --&gt;</span><br><span class="line">    &lt;mapper resource&#x3D;&quot;EmployeeDao.xml&quot;&#x2F;&gt;</span><br><span class="line">  &lt;&#x2F;mappers&gt;</span><br><span class="line">&lt;&#x2F;configuration&gt;</span><br></pre></td></tr></table></figure><h4 id="log4j-xml"><a href="#log4j-xml" class="headerlink" title="log4j.xml"></a><h id="1.3.3.1">log4j.xml</h></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;UTF-8&quot; ?&gt;</span><br><span class="line">&lt;!DOCTYPE log4j:configuration SYSTEM &quot;log4j.dtd&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;log4j:configuration xmlns:log4j&#x3D;&quot;http:&#x2F;&#x2F;jakarta.apache.org&#x2F;log4j&#x2F;&quot;&gt;</span><br><span class="line"></span><br><span class="line"> &lt;appender name&#x3D;&quot;STDOUT&quot; class&#x3D;&quot;org.apache.log4j.ConsoleAppender&quot;&gt;</span><br><span class="line">   &lt;param name&#x3D;&quot;Encoding&quot; value&#x3D;&quot;UTF-8&quot; &#x2F;&gt;</span><br><span class="line">   &lt;layout class&#x3D;&quot;org.apache.log4j.PatternLayout&quot;&gt;</span><br><span class="line">    &lt;param name&#x3D;&quot;ConversionPattern&quot; value&#x3D;&quot;%-5p %d&#123;MM-dd HH:mm:ss,SSS&#125; %m  (%F:%L) \n&quot; &#x2F;&gt;</span><br><span class="line">   &lt;&#x2F;layout&gt;</span><br><span class="line"> &lt;&#x2F;appender&gt;</span><br><span class="line"> &lt;logger name&#x3D;&quot;java.sql&quot;&gt;</span><br><span class="line">   &lt;level value&#x3D;&quot;debug&quot; &#x2F;&gt;</span><br><span class="line"> &lt;&#x2F;logger&gt;</span><br><span class="line"> &lt;logger name&#x3D;&quot;org.apache.ibatis&quot;&gt;</span><br><span class="line">   &lt;level value&#x3D;&quot;info&quot; &#x2F;&gt;</span><br><span class="line"> &lt;&#x2F;logger&gt;</span><br><span class="line"> &lt;root&gt;</span><br><span class="line">   &lt;level value&#x3D;&quot;debug&quot; &#x2F;&gt;</span><br><span class="line">   &lt;appender-ref ref&#x3D;&quot;STDOUT&quot; &#x2F;&gt;</span><br><span class="line"> &lt;&#x2F;root&gt;</span><br><span class="line">&lt;&#x2F;log4j:configuration&gt;</span><br></pre></td></tr></table></figure><h4 id="log4j-properties"><a href="#log4j-properties" class="headerlink" title="log4j.properties"></a><h id="1.3.3.2">log4j.properties</h></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># Global logging configuration</span><br><span class="line">log4j.rootLogger&#x3D;DEBUG, stdout</span><br><span class="line"># Console output...</span><br><span class="line">log4j.appender.stdout&#x3D;org.apache.log4j.ConsoleAppender</span><br><span class="line">log4j.appender.stdout.layout&#x3D;org.apache.log4j.PatternLayout</span><br><span class="line">log4j.appender.stdout.layout.ConversionPattern&#x3D;%5p [%t] - %m%n</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="测试类MyBatisTest"><a href="#测试类MyBatisTest" class="headerlink" title="测试类MyBatisTest"></a>测试类MyBatisTest</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">package com.lizhi.bean.Dao;</span><br><span class="line"></span><br><span class="line">import java.io.IOException;</span><br><span class="line">import java.io.InputStream;</span><br><span class="line"></span><br><span class="line">import javax.imageio.IIOException;</span><br><span class="line"></span><br><span class="line">import org.apache.ibatis.io.Resources;</span><br><span class="line">import org.apache.ibatis.session.SqlSession;</span><br><span class="line">import org.apache.ibatis.session.SqlSessionFactory;</span><br><span class="line">import org.apache.ibatis.session.SqlSessionFactoryBuilder;</span><br><span class="line">import org.junit.jupiter.api.Test;</span><br><span class="line"></span><br><span class="line">import com.lizhi.bean.Employee;</span><br><span class="line"></span><br><span class="line">public class MyBatisTest &#123;</span><br><span class="line"></span><br><span class="line">	@Test</span><br><span class="line">	public void test() throws IOException &#123;</span><br><span class="line">		&#x2F;&#x2F;1.根据全局配置文件创建出一个SqlSessionFactory</span><br><span class="line">		&#x2F;&#x2F;SqlSessionFactory,是SqlSession工厂，负责创建SqlSession对象</span><br><span class="line">		&#x2F;&#x2F;SqlSession: Sql回话（代表和数据库的一次会话）;</span><br><span class="line">		String resource &#x3D; &quot;mybatis-config.xml&quot;;</span><br><span class="line">		InputStream inputStream &#x3D; Resources.getResourceAsStream(resource);</span><br><span class="line">		SqlSessionFactory sqlSessionFactory &#x3D; new SqlSessionFactoryBuilder().build(inputStream);</span><br><span class="line"></span><br><span class="line">		&#x2F;&#x2F;2.获取和数据库的一次会话,就相当于getConnection();</span><br><span class="line">		SqlSession openSession &#x3D; sqlSessionFactory.openSession();</span><br><span class="line"></span><br><span class="line">		&#x2F;&#x2F;3.使用SqlSession操作数据库,先获取带Dao接口的实现</span><br><span class="line">		EmployeeDao employeeDao &#x3D; openSession.getMapper(EmployeeDao.class);</span><br><span class="line"></span><br><span class="line">		&#x2F;&#x2F;4.调用之前的方法</span><br><span class="line">		Employee employee &#x3D; employeeDao.getEmpById(1);</span><br><span class="line">		System.out.println(employee);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="测试结果"><a href="#测试结果" class="headerlink" title="测试结果"></a>测试结果</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">DEBUG [main] - Created connection 627318073.</span><br><span class="line">DEBUG [main] - Setting autocommit to false on JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@25641d39]</span><br><span class="line">DEBUG [main] - &#x3D;&#x3D;&gt;  Preparing: select * from t_employee where id&#x3D;?</span><br><span class="line">DEBUG [main] - &#x3D;&#x3D;&gt; Parameters: 1(Integer)</span><br><span class="line">DEBUG [main] - &lt;&#x3D;&#x3D;      Total: 1</span><br><span class="line">Employee [id&#x3D;1, empname&#x3D;admin, email&#x3D;123456789@qq.com, gender&#x3D;0]</span><br></pre></td></tr></table></figure><h3 id="1-3-4-利用MyBatis实现对数据库的增删改查"><a href="#1-3-4-利用MyBatis实现对数据库的增删改查" class="headerlink" title="1.3.4 利用MyBatis实现对数据库的增删改查"></a><h id="1.3.4">1.3.4 利用MyBatis实现对数据库的增删改查</h></h3><p><img src="/posts/a7d5b03b/1-4-1.png"></p><h4 id="包com-lizhi-dao"><a href="#包com-lizhi-dao" class="headerlink" title="包com.lizhi.dao"></a>包com.lizhi.dao</h4><h4 id="接口EmployeeDao-java-1"><a href="#接口EmployeeDao-java-1" class="headerlink" title="接口EmployeeDao.java"></a>接口EmployeeDao.java</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">package com.lizhi.dao;</span><br><span class="line"></span><br><span class="line">import com.lizhi.bean.Employee;</span><br><span class="line"></span><br><span class="line">public interface EmployeeDao &#123;</span><br><span class="line"></span><br><span class="line">	&#x2F;&#x2F;查询</span><br><span class="line">	public Employee getEmpById(Integer id);</span><br><span class="line">	&#x2F;&#x2F;更新</span><br><span class="line">	public int updateEmployee(Employee employee);</span><br><span class="line">	&#x2F;&#x2F;删除</span><br><span class="line">	public boolean deleteEmployee(Integer id);</span><br><span class="line">	&#x2F;&#x2F;插入</span><br><span class="line">	public int insertEmployee(Employee employee);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="包com-lizhi-bean-1"><a href="#包com-lizhi-bean-1" class="headerlink" title="包com.lizhi.bean"></a>包com.lizhi.bean</h4><h4 id="Employee-java-1"><a href="#Employee-java-1" class="headerlink" title="Employee.java"></a>Employee.java</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">package com.lizhi.bean;</span><br><span class="line"></span><br><span class="line">public class Employee &#123;</span><br><span class="line"></span><br><span class="line">	private Integer id;</span><br><span class="line">	private String empname;</span><br><span class="line">	private String email;</span><br><span class="line">	private Integer gender;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	&#x2F;&#x2F;写完无参构造器后必须再写个有参的构造器</span><br><span class="line">	public Employee() &#123;</span><br><span class="line">		super();</span><br><span class="line">	&#125;</span><br><span class="line">	public Employee(Integer id, String empname, String email, Integer gender) &#123;</span><br><span class="line">		super();</span><br><span class="line">		this.id &#x3D; id;</span><br><span class="line">		this.empname &#x3D; empname;</span><br><span class="line">		this.email &#x3D; email;</span><br><span class="line">		this.gender &#x3D; gender;</span><br><span class="line">	&#125;</span><br><span class="line">	public Integer getId() &#123;</span><br><span class="line">		return id;</span><br><span class="line">	&#125;</span><br><span class="line">	public void setId(Integer id) &#123;</span><br><span class="line">		this.id &#x3D; id;</span><br><span class="line">	&#125;</span><br><span class="line">	public String getEmpname() &#123;</span><br><span class="line">		return empname;</span><br><span class="line">	&#125;</span><br><span class="line">	public void setEmpname(String empname) &#123;</span><br><span class="line">		this.empname &#x3D; empname;</span><br><span class="line">	&#125;</span><br><span class="line">	public String getEmail() &#123;</span><br><span class="line">		return email;</span><br><span class="line">	&#125;</span><br><span class="line">	public void setEmail(String email) &#123;</span><br><span class="line">		this.email &#x3D; email;</span><br><span class="line">	&#125;</span><br><span class="line">	public Integer getGender() &#123;</span><br><span class="line">		return gender;</span><br><span class="line">	&#125;</span><br><span class="line">	public void setGender(Integer gender) &#123;</span><br><span class="line">		this.gender &#x3D; gender;</span><br><span class="line">	&#125;</span><br><span class="line">	@Override</span><br><span class="line">	public String toString() &#123;</span><br><span class="line">		return &quot;Employee [id&#x3D;&quot; + id + &quot;, empname&#x3D;&quot; + empname + &quot;, email&#x3D;&quot; + email + &quot;, gender&#x3D;&quot; + gender + &quot;]&quot;;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="EmployeeDao-xml-EmployeeDao的具体实现方法"><a href="#EmployeeDao-xml-EmployeeDao的具体实现方法" class="headerlink" title="EmployeeDao.xml(EmployeeDao的具体实现方法)"></a>EmployeeDao.xml(EmployeeDao的具体实现方法)</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;!DOCTYPE mapper</span><br><span class="line">  PUBLIC &quot;-&#x2F;&#x2F;mybatis.org&#x2F;&#x2F;DTD Mapper 3.0&#x2F;&#x2F;EN&quot;</span><br><span class="line">  &quot;http:&#x2F;&#x2F;mybatis.org&#x2F;dtd&#x2F;mybatis-3-mapper.dtd&quot;&gt;</span><br><span class="line"> &lt;mapper namespace&#x3D;&quot;com.lizhi.dao.EmployeeDao&quot;&gt;</span><br><span class="line"></span><br><span class="line"> &lt;!-- public Employee getEmpById(Integer id); 方法的实现;参数类型不用写--&gt;</span><br><span class="line">  	&lt;select id&#x3D;&quot;getEmpById&quot; resultType&#x3D;&quot;com.lizhi.bean.Employee&quot; &gt;</span><br><span class="line">  		&lt;!-- sql语句不要写分号 --&gt;</span><br><span class="line">  		select * from t_employee where id&#x3D;#&#123;id&#125;</span><br><span class="line">  	&lt;&#x2F;select&gt;</span><br><span class="line"></span><br><span class="line"> &lt;!-- public int updateEmployee(Employee employee);方法的实现 ;;增删改不用写返回值类型，增删改是返回影响多少行</span><br><span class="line"> mybatis自动判断，如果是数字(int,long),如果是boolean(影响0行自动封装false,否则true)。#&#123;属性名&#125;，从传入参数对象中取出对应属性值--&gt;</span><br><span class="line"> 	&lt;update id&#x3D;&quot;updateEmployee&quot; &gt;</span><br><span class="line"> 		update t_employee set empname&#x3D;#&#123;empname&#125;, gender&#x3D;#&#123;gender&#125; ,email&#x3D;#&#123;email&#125; where id&#x3D;#&#123;id&#125;</span><br><span class="line"> 	&lt;&#x2F;update&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- public int deleteEmployee(Integer id); --&gt;</span><br><span class="line">	&lt;delete id&#x3D;&quot;deleteEmployee&quot;&gt;</span><br><span class="line">		DELETE FROM t_employee WHERE id&#x3D;#&#123;id&#125;</span><br><span class="line">	&lt;&#x2F;delete&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- public int insertEmployee(Employee employee); --&gt;</span><br><span class="line">	&lt;insert id&#x3D;&quot;insertEmployee&quot;&gt;</span><br><span class="line">		INSERT INTO t_employee(empname,gender,email) VALUES(#&#123;empname&#125;,#&#123;gender&#125;,#&#123;email&#125;)</span><br><span class="line">	&lt;&#x2F;insert&gt;</span><br><span class="line"></span><br><span class="line"> &lt;&#x2F;mapper&gt;</span><br></pre></td></tr></table></figure><h4 id="log4j-properties-1"><a href="#log4j-properties-1" class="headerlink" title="log4j.properties"></a>log4j.properties</h4><p><a href="#1.3.3.2">log4j.properties</a></p><h4 id="log4j-xml-1"><a href="#log4j-xml-1" class="headerlink" title="log4j.xml"></a>log4j.xml</h4><p><a href="#1.3.3.1">log4j.xml</a></p><h4 id="mybatis-config-xml-1"><a href="#mybatis-config-xml-1" class="headerlink" title="mybatis-config.xml"></a>mybatis-config.xml</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;UTF-8&quot; ?&gt;</span><br><span class="line">&lt;!DOCTYPE configuration</span><br><span class="line">  PUBLIC &quot;-&#x2F;&#x2F;mybatis.org&#x2F;&#x2F;DTD Config 3.0&#x2F;&#x2F;EN&quot;</span><br><span class="line">  &quot;http:&#x2F;&#x2F;mybatis.org&#x2F;dtd&#x2F;mybatis-3-config.dtd&quot;&gt;</span><br><span class="line">&lt;configuration&gt;</span><br><span class="line">  &lt;environments default&#x3D;&quot;development&quot;&gt;</span><br><span class="line">    &lt;environment id&#x3D;&quot;development&quot;&gt;</span><br><span class="line">      &lt;transactionManager type&#x3D;&quot;JDBC&quot;&#x2F;&gt;</span><br><span class="line">      &lt;!-- 配置连接池 --&gt;</span><br><span class="line">      &lt;dataSource type&#x3D;&quot;POOLED&quot;&gt;</span><br><span class="line">        &lt;property name&#x3D;&quot;driver&quot; value&#x3D;&quot;com.mysql.cj.jdbc.Driver&quot;&#x2F;&gt;</span><br><span class="line">        &lt;property name&#x3D;&quot;url&quot; value&#x3D;&quot;jdbc:mysql:&#x2F;&#x2F;localhost:3306&#x2F;mybatis_0325?serverTimezone&#x3D;GMT%2B8&quot;&#x2F;&gt;</span><br><span class="line">        &lt;property name&#x3D;&quot;username&quot; value&#x3D;&quot;root&quot;&#x2F;&gt;</span><br><span class="line">        &lt;property name&#x3D;&quot;password&quot; value&#x3D;&quot;******&quot;&#x2F;&gt;</span><br><span class="line">      &lt;&#x2F;dataSource&gt;</span><br><span class="line">    &lt;&#x2F;environment&gt;</span><br><span class="line">  &lt;&#x2F;environments&gt;</span><br><span class="line"></span><br><span class="line"> &lt;!-- 引入我们自己编写的每一个接口的实现文件 --&gt;</span><br><span class="line">  &lt;mappers&gt;</span><br><span class="line">  	&lt;!-- resource: 表示从类路径下找资源 --&gt;</span><br><span class="line">    &lt;mapper resource&#x3D;&quot;mybatis&#x2F;EmployeeDao.xml&quot;&#x2F;&gt;</span><br><span class="line">  &lt;&#x2F;mappers&gt;</span><br><span class="line">&lt;&#x2F;configuration&gt;</span><br></pre></td></tr></table></figure><h4 id="包com-lizhi-test"><a href="#包com-lizhi-test" class="headerlink" title="包com.lizhi.test"></a>包com.lizhi.test</h4><h4 id="MybatisCRUDTest-java"><a href="#MybatisCRUDTest-java" class="headerlink" title="MybatisCRUDTest.java"></a>MybatisCRUDTest.java</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br></pre></td><td class="code"><pre><span class="line">package com.lizhi.test;</span><br><span class="line"></span><br><span class="line">import java.io.IOException;</span><br><span class="line">import java.io.InputStream;</span><br><span class="line"></span><br><span class="line">import org.apache.ibatis.io.Resources;</span><br><span class="line">import org.apache.ibatis.session.SqlSession;</span><br><span class="line">import org.apache.ibatis.session.SqlSessionFactory;</span><br><span class="line">import org.apache.ibatis.session.SqlSessionFactoryBuilder;</span><br><span class="line">import org.junit.jupiter.api.Test;</span><br><span class="line"></span><br><span class="line">import com.lizhi.bean.Employee;</span><br><span class="line">import com.lizhi.dao.EmployeeDao;</span><br><span class="line"></span><br><span class="line">public class MybatisCRUDTest &#123;</span><br><span class="line"></span><br><span class="line">	&#x2F;&#x2F;工厂一个</span><br><span class="line">	SqlSessionFactory sqlSessionFactory;</span><br><span class="line"></span><br><span class="line">	public void initSqlSessionFactory() throws IOException &#123;</span><br><span class="line">		&#x2F;&#x2F;1.跟据全局配置文件先得到SqlSessionFactory对象(官方文档复制)，快捷键Ctrl+shift+O导包</span><br><span class="line">				String resource &#x3D; &quot;mybatis-config.xml&quot;;</span><br><span class="line">				InputStream inputStream &#x3D; Resources.getResourceAsStream(resource);</span><br><span class="line">				sqlSessionFactory &#x3D; new SqlSessionFactoryBuilder().build(inputStream);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	&#x2F;**</span><br><span class="line">	 * 更新</span><br><span class="line">	 * @throws IOException</span><br><span class="line">	 *&#x2F;</span><br><span class="line">	@Test</span><br><span class="line">	public void testupdateEmployee() throws IOException &#123;</span><br><span class="line">		initSqlSessionFactory();</span><br><span class="line">		SqlSession openSession &#x3D; sqlSessionFactory.openSession(true);</span><br><span class="line">		try &#123;</span><br><span class="line">			EmployeeDao employeeDao &#x3D; openSession.getMapper(EmployeeDao.class);</span><br><span class="line">			int rows &#x3D; employeeDao.updateEmployee(new Employee(4 , &quot;lizhi&quot; ,&quot;lizhi@qq.com&quot;, 0 ));</span><br><span class="line"></span><br><span class="line">			if (rows &gt; 0) &#123;</span><br><span class="line">				System.out.println(&quot;您成功修改了&quot;+rows+&quot;条数据！&quot;);</span><br><span class="line">			&#125; else &#123;</span><br><span class="line">				System.out.println(&quot;修改失败！&quot;);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125; finally &#123;</span><br><span class="line">			openSession.close();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	&#x2F;**</span><br><span class="line">	 * 删除</span><br><span class="line">	 * @throws IOException</span><br><span class="line">	 *&#x2F;</span><br><span class="line">	@Test</span><br><span class="line">	public void testdeleteEmployee() throws IOException &#123;</span><br><span class="line">		initSqlSessionFactory();</span><br><span class="line">		SqlSession openSession &#x3D; sqlSessionFactory.openSession(true);</span><br><span class="line">		try &#123;</span><br><span class="line">			EmployeeDao employee &#x3D; openSession.getMapper(EmployeeDao.class);</span><br><span class="line">			employee.deleteEmployee(3);&#x2F;&#x2F;id</span><br><span class="line">		&#125; finally &#123;</span><br><span class="line">			openSession.close();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	&#x2F;**</span><br><span class="line">	 * 测试插入</span><br><span class="line">	 * @throws IOException</span><br><span class="line">	 *&#x2F;</span><br><span class="line">	@Test</span><br><span class="line">	public void testInsert() throws IOException &#123;</span><br><span class="line">		initSqlSessionFactory();</span><br><span class="line">		&#x2F;&#x2F;1.获取和数据库的一次会话</span><br><span class="line">		&#x2F;&#x2F;true是代表自动提交，不用手动提交</span><br><span class="line">		SqlSession openSession &#x3D; sqlSessionFactory.openSession(true);</span><br><span class="line">		try &#123;</span><br><span class="line">			&#x2F;&#x2F;2.获取到接口的映射器</span><br><span class="line">			EmployeeDao mapper &#x3D; openSession.getMapper(EmployeeDao.class);</span><br><span class="line"></span><br><span class="line">			&#x2F;&#x2F;3.测试</span><br><span class="line">			int i &#x3D; mapper.insertEmployee(new Employee(null , &quot;tomcat&quot; ,&quot;tomcat@qq.com&quot;, 0 ));</span><br><span class="line"></span><br><span class="line">			if (i&gt;0) &#123;</span><br><span class="line">				System.out.println(&quot;您成功插入了&quot;+i+&quot;条数据！&quot;);</span><br><span class="line">			&#125; else &#123;</span><br><span class="line">				System.out.println(&quot;插入失败！&quot;);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125; finally &#123;</span><br><span class="line">			&#x2F;&#x2F;手动提交</span><br><span class="line">			&#x2F;&#x2F;openSession.commit();</span><br><span class="line">			&#x2F;&#x2F;关闭连接</span><br><span class="line">			openSession.close();</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	&#x2F;**</span><br><span class="line">	 * 测试查询</span><br><span class="line">	 * @throws IOException</span><br><span class="line">	 *&#x2F;</span><br><span class="line">	@Test</span><br><span class="line">	public void test() throws IOException &#123;</span><br><span class="line">		&#x2F;&#x2F;1.跟据全局配置文件先得到SqlSessionFactory</span><br><span class="line">		initSqlSessionFactory();</span><br><span class="line">		&#x2F;&#x2F;2.得到SqlSession对象</span><br><span class="line">		SqlSession openSession &#x3D; sqlSessionFactory.openSession();</span><br><span class="line"></span><br><span class="line">		&#x2F;&#x2F;3.获取到dao接口的实现类(映射器)</span><br><span class="line">		EmployeeDao dao &#x3D; openSession.getMapper(EmployeeDao.class);</span><br><span class="line">		try &#123;</span><br><span class="line"></span><br><span class="line">			Employee employee &#x3D; dao.getEmpById(1);</span><br><span class="line">			System.out.println(employee);</span><br><span class="line">		&#125;finally &#123;</span><br><span class="line">			openSession.close();</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="1-4-3-配置文件详解测试实例源码"><a href="#1-4-3-配置文件详解测试实例源码" class="headerlink" title="1.4.3 配置文件详解测试实例源码"></a><h id="1.4.3">1.4.3 配置文件详解测试实例源码</h></h3><p><img src="/posts/a7d5b03b/1-4-3-1.png"></p><h4 id="package-com-lizhi-dao"><a href="#package-com-lizhi-dao" class="headerlink" title="package com.lizhi.dao;"></a>package com.lizhi.dao;</h4><h4 id="接口EmployeeDao。java"><a href="#接口EmployeeDao。java" class="headerlink" title="接口EmployeeDao。java"></a>接口EmployeeDao。java</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">package com.lizhi.dao;</span><br><span class="line"></span><br><span class="line">import com.lizhi.bean.Employee;</span><br><span class="line"></span><br><span class="line">public interface EmployeeDao &#123;</span><br><span class="line"></span><br><span class="line">	&#x2F;&#x2F;查询</span><br><span class="line">	public Employee getEmpById(Integer id);</span><br><span class="line">	&#x2F;&#x2F;更新</span><br><span class="line">	public int updateEmployee(Employee employee);</span><br><span class="line">	&#x2F;&#x2F;删除</span><br><span class="line">	public boolean deleteEmployee(Integer id);</span><br><span class="line">	&#x2F;&#x2F;插入</span><br><span class="line">	public int insertEmployee(Employee employee);</span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="EmployeeDaoAnnotation-java"><a href="#EmployeeDaoAnnotation-java" class="headerlink" title="EmployeeDaoAnnotation.java"></a>EmployeeDaoAnnotation.java</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">package com.lizhi.dao;</span><br><span class="line"></span><br><span class="line">import org.apache.ibatis.annotations.Delete;</span><br><span class="line">import org.apache.ibatis.annotations.Insert;</span><br><span class="line">import org.apache.ibatis.annotations.Select;</span><br><span class="line">import org.apache.ibatis.annotations.Update;</span><br><span class="line"></span><br><span class="line">import com.lizhi.bean.Employee;</span><br><span class="line">&#x2F;*</span><br><span class="line"> * 注解方法配置增删改查，虽然方便，但是不便于维护</span><br><span class="line"> * </span><br><span class="line"> *&#x2F;</span><br><span class="line">public interface EmployeeDaoAnnotation &#123;</span><br><span class="line"></span><br><span class="line">	&#x2F;&#x2F;查询</span><br><span class="line">	@Select(&quot;select * from t_employee where id&#x3D;#&#123;id&#125;&quot;)</span><br><span class="line">	public Employee getEmpById(Integer id);</span><br><span class="line">	&#x2F;&#x2F;更新</span><br><span class="line">	@Update(&quot;update t_employee set empname&#x3D;#&#123;empname&#125;, gender&#x3D;#&#123;gender&#125; ,email&#x3D;#&#123;email&#125; where id&#x3D;#&#123;id&#125;&quot;)</span><br><span class="line">	public int updateEmployee(Employee employee);</span><br><span class="line">	&#x2F;&#x2F;删除</span><br><span class="line">	@Delete(&quot;DELETE FROM t_employee WHERE id&#x3D;#&#123;id&#125;&quot;)</span><br><span class="line">	public boolean deleteEmployee(Integer id);</span><br><span class="line">	&#x2F;&#x2F;插入</span><br><span class="line">	@Insert(&quot;INSERT INTO t_employee(empname,gender,email) VALUES(#&#123;empname&#125;,#&#123;gender&#125;,#&#123;email&#125;)&quot;)</span><br><span class="line">	public int insertEmployee(Employee employee);</span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="Employee-java-2"><a href="#Employee-java-2" class="headerlink" title="Employee.java"></a>Employee.java</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">package com.lizhi.bean;</span><br><span class="line"></span><br><span class="line">public class Employee &#123;</span><br><span class="line"></span><br><span class="line">	private Integer id;</span><br><span class="line">	private String empname;</span><br><span class="line">	private String email;</span><br><span class="line">	private Integer gender;</span><br><span class="line">	private String loginAccount;</span><br><span class="line">		</span><br><span class="line">	public String getLoginAccount() &#123;</span><br><span class="line">		return loginAccount;</span><br><span class="line">	&#125;</span><br><span class="line">	public void setLoginAccount(String loginAccount) &#123;</span><br><span class="line">		this.loginAccount &#x3D; loginAccount;</span><br><span class="line">	&#125;</span><br><span class="line">	&#x2F;&#x2F;写完无参构造器后必须再写个有参的构造器</span><br><span class="line">	public Employee() &#123;</span><br><span class="line">		super();</span><br><span class="line">	&#125;</span><br><span class="line">	public Employee(Integer id, String empname, String email, Integer gender) &#123;</span><br><span class="line">		super();</span><br><span class="line">		this.id &#x3D; id;</span><br><span class="line">		this.empname &#x3D; empname;</span><br><span class="line">		this.email &#x3D; email;</span><br><span class="line">		this.gender &#x3D; gender;</span><br><span class="line">	&#125;</span><br><span class="line">	public Integer getId() &#123;</span><br><span class="line">		return id;</span><br><span class="line">	&#125;</span><br><span class="line">	public void setId(Integer id) &#123;</span><br><span class="line">		this.id &#x3D; id;</span><br><span class="line">	&#125;</span><br><span class="line">	public String getEmpname() &#123;</span><br><span class="line">		return empname;</span><br><span class="line">	&#125;</span><br><span class="line">	public void setEmpname(String empname) &#123;</span><br><span class="line">		this.empname &#x3D; empname;</span><br><span class="line">	&#125;</span><br><span class="line">	public String getEmail() &#123;</span><br><span class="line">		return email;</span><br><span class="line">	&#125;</span><br><span class="line">	public void setEmail(String email) &#123;</span><br><span class="line">		this.email &#x3D; email;</span><br><span class="line">	&#125;</span><br><span class="line">	public Integer getGender() &#123;</span><br><span class="line">		return gender;</span><br><span class="line">	&#125;</span><br><span class="line">	public void setGender(Integer gender) &#123;</span><br><span class="line">		this.gender &#x3D; gender;</span><br><span class="line">	&#125;</span><br><span class="line">	@Override</span><br><span class="line">	public String toString() &#123;</span><br><span class="line">		return &quot;Employee [id&#x3D;&quot; + id + &quot;, empname&#x3D;&quot; + empname + &quot;, email&#x3D;&quot; + email + &quot;, gender&#x3D;&quot; + gender</span><br><span class="line">				+ &quot;, loginAccount&#x3D;&quot; + loginAccount + &quot;]&quot;;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="EmployeeDao-xml"><a href="#EmployeeDao-xml" class="headerlink" title="EmployeeDao.xml"></a>EmployeeDao.xml</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;!DOCTYPE mapper</span><br><span class="line">  PUBLIC &quot;-&#x2F;&#x2F;mybatis.org&#x2F;&#x2F;DTD Mapper 3.0&#x2F;&#x2F;EN&quot;</span><br><span class="line">  &quot;http:&#x2F;&#x2F;mybatis.org&#x2F;dtd&#x2F;mybatis-3-mapper.dtd&quot;&gt;</span><br><span class="line"> &lt;mapper namespace&#x3D;&quot;com.lizhi.dao.EmployeeDao&quot;&gt;</span><br><span class="line">  </span><br><span class="line"> &lt;!-- public Employee getEmpById(Integer id); 方法的实现;参数类型不用写--&gt;</span><br><span class="line"> 	&lt;!-- 默认这个查询是不区分环境 --&gt;</span><br><span class="line">  	&lt;select id&#x3D;&quot;getEmpById&quot; resultType&#x3D;&quot;com.lizhi.bean.Employee&quot; &gt;</span><br><span class="line">  		&lt;!-- sql语句不要写分号 --&gt;</span><br><span class="line">  		select * from t_employee where id&#x3D;#&#123;id&#125;</span><br><span class="line">  	&lt;&#x2F;select&gt;</span><br><span class="line"> &lt;!-- 如果能精确匹配，不能就用模糊的 </span><br><span class="line">   	&lt;select id&#x3D;&quot;getEmpById&quot; resultType&#x3D;&quot;com.lizhi.bean.Employee&quot; databaseId&#x3D;&quot;mysql&quot;&gt;</span><br><span class="line">  		select * from t_employee where id&#x3D;#&#123;id&#125;</span><br><span class="line">  	&lt;&#x2F;select&gt;</span><br><span class="line"> </span><br><span class="line">    	&lt;select id&#x3D;&quot;getEmpById&quot; resultType&#x3D;&quot;com.lizhi.bean.Employee&quot; databaseId&#x3D;&quot;oracle&quot;&gt;</span><br><span class="line">  		select * from t_employee where id&#x3D;#&#123;id&#125;</span><br><span class="line">  	&lt;&#x2F;select&gt;</span><br><span class="line"> </span><br><span class="line">    	&lt;select id&#x3D;&quot;getEmpById&quot; resultType&#x3D;&quot;com.lizhi.bean.Employee&quot; databaseId&#x3D;&quot;sqlserver&quot;&gt;</span><br><span class="line">  		select * from t_employee where id&#x3D;#&#123;id&#125;</span><br><span class="line">  	&lt;&#x2F;select&gt;</span><br><span class="line"> --&gt;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> &lt;!-- public int updateEmployee(Employee employee);方法的实现 ;;增删改不用写返回值类型，增删改是返回影响多少行</span><br><span class="line"> mybatis自动判断，如果是数字(int,long),如果是boolean(影响0行自动封装false,否则true)。#&#123;属性名&#125;，从传入参数对象中取出对应属性值--&gt; </span><br><span class="line"> 	&lt;update id&#x3D;&quot;updateEmployee&quot; &gt;</span><br><span class="line"> 	</span><br><span class="line"> 		update t_employee set empname&#x3D;#&#123;empname&#125;, gender&#x3D;#&#123;gender&#125; ,email&#x3D;#&#123;email&#125; where id&#x3D;#&#123;id&#125;</span><br><span class="line"> 	&lt;&#x2F;update&gt;</span><br><span class="line">  </span><br><span class="line">&lt;!-- public int deleteEmployee(Integer id); --&gt;</span><br><span class="line">	&lt;delete id&#x3D;&quot;deleteEmployee&quot;&gt;</span><br><span class="line">		DELETE FROM t_employee WHERE id&#x3D;#&#123;id&#125;</span><br><span class="line">	&lt;&#x2F;delete&gt;</span><br><span class="line">	</span><br><span class="line">&lt;!-- public int insertEmployee(Employee employee); --&gt;</span><br><span class="line">	&lt;insert id&#x3D;&quot;insertEmployee&quot;&gt;</span><br><span class="line">		INSERT INTO t_employee(empname,gender,email) VALUES(#&#123;empname&#125;,#&#123;gender&#125;,#&#123;email&#125;)</span><br><span class="line">	&lt;&#x2F;insert&gt;</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line"> &lt;&#x2F;mapper&gt;</span><br></pre></td></tr></table></figure><h4 id="dbconfig-properties"><a href="#dbconfig-properties" class="headerlink" title="dbconfig.properties"></a>dbconfig.properties</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">username&#x3D;root</span><br><span class="line">password&#x3D;******</span><br><span class="line">driverclass&#x3D;com.mysql.cj.jdbc.Driver</span><br><span class="line">jdbcurl&#x3D;jdbc:mysql:&#x2F;&#x2F;localhost:3306&#x2F;mybatis_0325?serverTimezone&#x3D;GMT%2B8&amp;useSSL&#x3D;false</span><br></pre></td></tr></table></figure><h4 id="log4j-properties-2"><a href="#log4j-properties-2" class="headerlink" title="log4j.properties"></a>log4j.properties</h4><p><a href="#1.3.3.2">log4j.properties</a></p><h4 id="log4j-xml-2"><a href="#log4j-xml-2" class="headerlink" title="log4j.xml"></a>log4j.xml</h4><p><a href="#1.3.3.1">log4j.xml</a></p><h4 id="mybatis-config-xml-2"><a href="#mybatis-config-xml-2" class="headerlink" title="mybatis-config.xml"></a><h id="1.4.3.2">mybatis-config.xml</h></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;UTF-8&quot; ?&gt;</span><br><span class="line">&lt;!DOCTYPE configuration</span><br><span class="line">  PUBLIC &quot;-&#x2F;&#x2F;mybatis.org&#x2F;&#x2F;DTD Config 3.0&#x2F;&#x2F;EN&quot;</span><br><span class="line">  &quot;http:&#x2F;&#x2F;mybatis.org&#x2F;dtd&#x2F;mybatis-3-config.dtd&quot;&gt;</span><br><span class="line">&lt;configuration&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 1. 和Spring的context,property-placeholder;引用外部配置文件 --&gt;</span><br><span class="line">	&lt;!--</span><br><span class="line">	resource : 从类路径下开始引用</span><br><span class="line">	url: 引用磁盘路径文件或者网络路径的资源</span><br><span class="line">	 --&gt;</span><br><span class="line">	&lt;properties resource&#x3D;&quot;dbconfig.properties&quot;&gt;&lt;&#x2F;properties&gt;</span><br><span class="line">	</span><br><span class="line">&lt;!-- 2. settings这是 MyBatis 中极为重要的调整设置，它们会改变 MyBatis 的运行时行为。 详见文档 --&gt;</span><br><span class="line">	&lt;!-- </span><br><span class="line">	mapUnderscoreToCamelCase: 是否开启自动驼峰命名规则（camel case）映射，即从经典数据库列名 A_COLUMN 到经典 Java 属性名 aColumn 的类似映射。 </span><br><span class="line">	 即在接口Employee中，用驼峰命名可以和数据库中用下划线命名的列名相对应,javaBean 可以自动对应</span><br><span class="line">	 --&gt;</span><br><span class="line">	&lt;settings&gt;</span><br><span class="line">		&lt;!-- name: 配置项的key value:配置项的值 --&gt;</span><br><span class="line">		&lt;!-- 数据库不区分大小写 	loginAcount  login_account --&gt;</span><br><span class="line">		&lt;setting name&#x3D;&quot;mapUnderscoreToCamelCase&quot; value&#x3D;&quot;true&quot;&#x2F;&gt;</span><br><span class="line">	&lt;&#x2F;settings&gt;</span><br><span class="line">	</span><br><span class="line">&lt;!-- 3.类型别名，为常用的类型（JavaBean）起别名 --&gt;</span><br><span class="line">	&lt;typeAliases&gt;</span><br><span class="line">		&lt;!-- typeAlias: 就是为一个javaBean起别名；别名默认就是类名（不区分大小写），配置文件中就可以用别名了 --&gt;</span><br><span class="line">		&lt;!-- 在EmployeeDao.xml中&lt;select id&#x3D;&quot;getEmpById&quot; resultType&#x3D;&quot;Emp&quot; &gt;标签就可以直接用Employee代替简化开发 </span><br><span class="line">			alias&#x3D;&quot;&quot;指定一个别名如果不指定就是默认Employee--&gt;</span><br><span class="line">		&lt;!-- &lt;typeAlias type&#x3D;&quot;com.lizhi.bean.Employee&quot; alias&#x3D;&quot;emp&quot;&#x2F;&gt;--&gt;</span><br><span class="line">		</span><br><span class="line">		&lt;!-- 批量起别名 ，name&#x3D;&quot;&quot;指定包名，为这个包下的所有类起别名,默认别名就是类名</span><br><span class="line">			也可以在指定的类上面添加@Alias(&quot;&quot;)注解的方式指定别名</span><br><span class="line">		--&gt;</span><br><span class="line">		&lt;!-- &lt;package name&#x3D;&quot;com.lizhi.bean&quot;&#x2F;&gt;--&gt;</span><br><span class="line">		&lt;!-- 推荐使用全类名 --&gt;		</span><br><span class="line">		&lt;&#x2F;typeAliases&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 4.类型处理器 --&gt;</span><br><span class="line">		&lt;!-- &lt;typeHandlers&gt;</span><br><span class="line">			自定义好的类型处理器就这么配置上了</span><br><span class="line">			&lt;typeHandler handler&#x3D;&quot;&quot;&#x2F;&gt;</span><br><span class="line">		&lt;&#x2F;typeHandlers&gt; --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 5.插件是mybatis中的一个强大功能 --&gt;</span><br><span class="line">	</span><br><span class="line">&lt;!-- 6.environments配置环境</span><br><span class="line">		environment: 配置一个具体的环境。都需要一个事务管理器和一个数据源。</span><br><span class="line">		可以配置多个environments，id是当前环境的唯一标示</span><br><span class="line">		default&#x3D;&quot;development&quot; : 默认使用哪个环境</span><br><span class="line">		后来数据源和事务管理都是Spring来做</span><br><span class="line"> --&gt;	</span><br><span class="line">	&lt;environments default&#x3D;&quot;development&quot;&gt;</span><br><span class="line">    &lt;environment id&#x3D;&quot;development&quot;&gt;</span><br><span class="line">      &lt;transactionManager type&#x3D;&quot;JDBC&quot;&#x2F;&gt;</span><br><span class="line">      &lt;!-- 配置连接池  POOLED: 连接池--&gt;</span><br><span class="line">      &lt;dataSource type&#x3D;&quot;POOLED&quot;&gt;</span><br><span class="line">      	&lt;!-- $&#123;&#125;取出配置值 --&gt;</span><br><span class="line">        &lt;property name&#x3D;&quot;driver&quot; value&#x3D;&quot;$&#123;driverclass&#125;&quot;&#x2F;&gt;</span><br><span class="line">        &lt;property name&#x3D;&quot;url&quot; value&#x3D;&quot;$&#123;jdbcurl&#125;&quot;&#x2F;&gt;</span><br><span class="line">        &lt;property name&#x3D;&quot;username&quot; value&#x3D;&quot;$&#123;username&#125;&quot;&#x2F;&gt;</span><br><span class="line">        &lt;property name&#x3D;&quot;password&quot; value&#x3D;&quot;$&#123;password&#125;&quot;&#x2F;&gt;</span><br><span class="line">      &lt;&#x2F;dataSource&gt;</span><br><span class="line">    &lt;&#x2F;environment&gt;</span><br><span class="line">  &lt;&#x2F;environments&gt;</span><br><span class="line">  </span><br><span class="line">&lt;!-- 7.mybatis用来考虑数据库移植性的 ,例如ODBC和JDBC的语法不同，当切换数据库的时候会报错</span><br><span class="line">		type&#x3D;&quot;DB_VENDOR&quot;是固定的值</span><br><span class="line">--&gt; </span><br><span class="line">  	&lt;databaseIdProvider type&#x3D;&quot;DB_VENDOR&quot;&gt;</span><br><span class="line">  		&lt;!-- name&#x3D;&quot;&quot;:数据库厂商标识，value&#x3D;&quot;&quot;:给这个标识起一个好用的名字</span><br><span class="line">  			MySQL的标识：MySQL</span><br><span class="line">  			Oracle的标识：Oracle</span><br><span class="line">  			SQL Server的标识：SQL Server</span><br><span class="line">  		 --&gt;</span><br><span class="line">  		&lt;property name&#x3D;&quot;MySQL&quot; value&#x3D;&quot;mysql&quot;&#x2F;&gt;</span><br><span class="line">  		&lt;property name&#x3D;&quot;Oracle&quot; value&#x3D;&quot;oracle&quot;&#x2F;&gt;</span><br><span class="line">  		&lt;property name&#x3D;&quot;SQL Server&quot; value&#x3D;&quot;sqlserver&quot;&#x2F;&gt;</span><br><span class="line">  	&lt;&#x2F;databaseIdProvider&gt;</span><br><span class="line">  	</span><br><span class="line"> &lt;!-- 8.写好的Sql映射文件需要使用mappers注册进来 --&gt;</span><br><span class="line"> 	&lt;mappers&gt;</span><br><span class="line"> 		&lt;!-- </span><br><span class="line"> 			url: 可以从磁盘或者网络路径引用</span><br><span class="line"> 			resource: 在类路径下找sql映射文件</span><br><span class="line"> 			class: 直接引用接口的全类名，可以将接口的实例化配置文件放在和接口同一个包下，且文件名和接口名一致</span><br><span class="line"> 			class的另一种方法；</span><br><span class="line"> 		 --&gt;</span><br><span class="line"> 		 &lt;!-- &lt;mapper resource&#x3D;&quot;mybatis&#x2F;EmployeeDao.xml&quot;&#x2F;&gt; --&gt;</span><br><span class="line"> 		&lt;!-- &lt;mapper class&#x3D;&quot;com.lizhi.dao.EmployeeDao&quot;&#x2F;&gt; --&gt;</span><br><span class="line"> 		 &lt;!-- &lt;mapper class&#x3D;&quot;com.lizhi.dao.EmployeeDaoAnnotation&quot;&#x2F;&gt; --&gt;</span><br><span class="line"> 		 &lt;!-- 常规的配置方法和注解方法配合使用</span><br><span class="line"> 		 	重要的Dao可以写配置，简单的Dao就直接写注解</span><br><span class="line"> 		  --&gt;</span><br><span class="line"> 		&lt;!-- 批量注册name&#x3D;&quot;&quot;,Dao所在包名</span><br><span class="line"> 			这里有个问题；批量扫描只能扫描指定的包名，而不能扫描位于conf&#x2F;mybatis&#x2F;EmployeeDao.xml路径下的</span><br><span class="line"> 			EmployeeDao文件，这时将包名mybatis改成com.lizhi.dao虽然看起来是两个包，但是从类路径来看是一个包</span><br><span class="line"> 			因此都可以扫描</span><br><span class="line"> 		 --&gt;</span><br><span class="line"> 		&lt;package name&#x3D;&quot;com.lizhi.dao&quot;&#x2F;&gt;</span><br><span class="line"> 	&lt;&#x2F;mappers&gt;</span><br><span class="line">&lt;&#x2F;configuration&gt;</span><br></pre></td></tr></table></figure><h4 id="MybatisCRUDTest-java-1"><a href="#MybatisCRUDTest-java-1" class="headerlink" title="MybatisCRUDTest.java"></a>MybatisCRUDTest.java</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br></pre></td><td class="code"><pre><span class="line">package com.lizhi.test;</span><br><span class="line"></span><br><span class="line">import java.io.IOException;</span><br><span class="line">import java.io.InputStream;</span><br><span class="line"></span><br><span class="line">import org.apache.ibatis.io.Resources;</span><br><span class="line">import org.apache.ibatis.session.SqlSession;</span><br><span class="line">import org.apache.ibatis.session.SqlSessionFactory;</span><br><span class="line">import org.apache.ibatis.session.SqlSessionFactoryBuilder;</span><br><span class="line">import org.junit.Before;</span><br><span class="line">import org.junit.jupiter.api.Test;</span><br><span class="line"></span><br><span class="line">import com.lizhi.bean.Employee;</span><br><span class="line">import com.lizhi.dao.EmployeeDao;</span><br><span class="line">import com.lizhi.dao.EmployeeDaoAnnotation;</span><br><span class="line"></span><br><span class="line">public class MybatisCRUDTest &#123;</span><br><span class="line"></span><br><span class="line">	&#x2F;&#x2F;工厂一个</span><br><span class="line">	SqlSessionFactory sqlSessionFactory;</span><br><span class="line">	</span><br><span class="line">	@Before</span><br><span class="line">	public void initSqlSessionFactory() throws IOException &#123;</span><br><span class="line">		&#x2F;&#x2F;1.跟据全局配置文件先得到SqlSessionFactory对象(官方文档复制)，快捷键Ctrl+shift+O导包</span><br><span class="line">				String resource &#x3D; &quot;mybatis-config.xml&quot;;</span><br><span class="line">				InputStream inputStream &#x3D; Resources.getResourceAsStream(resource);</span><br><span class="line">				sqlSessionFactory &#x3D; new SqlSessionFactoryBuilder().build(inputStream);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	&#x2F;*</span><br><span class="line">	 * </span><br><span class="line">	 * 测试注解方法sql查询 EmployeeDaoAnnotation.java</span><br><span class="line">	 * mybatis-config里配置</span><br><span class="line">	 * &lt;mapper class&#x3D;&quot;com.lizhi.dao.EmployeeDaoAnnotation&quot;&#x2F;&gt;</span><br><span class="line">	 *&#x2F;</span><br><span class="line">	@Test</span><br><span class="line">	public void testAnnotation() throws IOException &#123;</span><br><span class="line">		initSqlSessionFactory();</span><br><span class="line">		SqlSession openSession &#x3D; sqlSessionFactory.openSession();</span><br><span class="line">		try &#123;</span><br><span class="line">			EmployeeDaoAnnotation mapper &#x3D; openSession.getMapper(EmployeeDaoAnnotation.class);</span><br><span class="line">			Employee empById &#x3D; mapper.getEmpById(1);</span><br><span class="line">			System.out.println(empById);</span><br><span class="line">		&#125; catch (Exception e) &#123;</span><br><span class="line">			&#x2F;&#x2F; TODO Auto-generated catch block</span><br><span class="line">			openSession.close();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	&#x2F;**</span><br><span class="line">	 * 更新</span><br><span class="line">	 * @throws IOException </span><br><span class="line">	 * 如果运行不成功看配置文件里的mapper有没有注册</span><br><span class="line">	 *&#x2F;</span><br><span class="line">	@Test</span><br><span class="line">	public void testupdateEmployee() throws IOException &#123;</span><br><span class="line">		initSqlSessionFactory();</span><br><span class="line">		SqlSession openSession &#x3D; sqlSessionFactory.openSession(true);</span><br><span class="line">		try &#123;</span><br><span class="line">			EmployeeDao employeeDao &#x3D; openSession.getMapper(EmployeeDao.class);</span><br><span class="line">			int rows &#x3D; employeeDao.updateEmployee(new Employee(4 , &quot;lizhi&quot; ,&quot;lizhi@qq.com&quot;, 0 ));</span><br><span class="line"></span><br><span class="line">			if (rows &gt; 0) &#123;</span><br><span class="line">				System.out.println(&quot;您成功修改了&quot;+rows+&quot;条数据！&quot;);</span><br><span class="line">			&#125; else &#123;</span><br><span class="line">				System.out.println(&quot;修改失败！&quot;);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125; finally &#123;</span><br><span class="line">			openSession.close();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	&#x2F;**</span><br><span class="line">	 * 删除</span><br><span class="line">	 * @throws IOException </span><br><span class="line">	 *&#x2F;</span><br><span class="line">	@Test</span><br><span class="line">	public void testdeleteEmployee() throws IOException &#123;</span><br><span class="line">		initSqlSessionFactory();</span><br><span class="line">		SqlSession openSession &#x3D; sqlSessionFactory.openSession(true);</span><br><span class="line">		try &#123;</span><br><span class="line">			EmployeeDao employee &#x3D; openSession.getMapper(EmployeeDao.class);</span><br><span class="line">			employee.deleteEmployee(3);&#x2F;&#x2F;id</span><br><span class="line">		&#125; finally &#123;</span><br><span class="line">			openSession.close();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	&#x2F;**</span><br><span class="line">	 * 测试插入</span><br><span class="line">	 * @throws IOException </span><br><span class="line">	 *&#x2F;</span><br><span class="line">	@Test</span><br><span class="line">	public void testInsert() throws IOException &#123;</span><br><span class="line">		initSqlSessionFactory();</span><br><span class="line">		&#x2F;&#x2F;1.获取和数据库的一次会话</span><br><span class="line">		&#x2F;&#x2F;true是代表自动提交，不用手动提交</span><br><span class="line">		SqlSession openSession &#x3D; sqlSessionFactory.openSession(true);</span><br><span class="line">		try &#123;</span><br><span class="line">			&#x2F;&#x2F;2.获取到接口的映射器</span><br><span class="line">			EmployeeDao mapper &#x3D; openSession.getMapper(EmployeeDao.class);</span><br><span class="line">			</span><br><span class="line">			&#x2F;&#x2F;3.测试</span><br><span class="line">			int i &#x3D; mapper.insertEmployee(new Employee(null , &quot;tomcat&quot; ,&quot;tomcat@qq.com&quot;, 0 ));</span><br><span class="line">			</span><br><span class="line">			if (i&gt;0) &#123;</span><br><span class="line">				System.out.println(&quot;您成功插入了&quot;+i+&quot;条数据！&quot;);</span><br><span class="line">			&#125; else &#123;</span><br><span class="line">				System.out.println(&quot;插入失败！&quot;);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125; finally &#123;</span><br><span class="line">			&#x2F;&#x2F;手动提交</span><br><span class="line">			&#x2F;&#x2F;openSession.commit();</span><br><span class="line">			&#x2F;&#x2F;关闭连接</span><br><span class="line">			openSession.close();</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	&#x2F;**</span><br><span class="line">	 * 测试查询</span><br><span class="line">	 * @throws IOException</span><br><span class="line">	 *&#x2F;</span><br><span class="line">	@Test</span><br><span class="line">	public void test() throws IOException &#123;</span><br><span class="line">		&#x2F;&#x2F;1.跟据全局配置文件先得到SqlSessionFactory</span><br><span class="line">		initSqlSessionFactory();</span><br><span class="line">		&#x2F;&#x2F;2.得到SqlSession对象</span><br><span class="line">		SqlSession openSession &#x3D; sqlSessionFactory.openSession();</span><br><span class="line">		</span><br><span class="line">		&#x2F;&#x2F;3.获取到dao接口的实现类(映射器)</span><br><span class="line">		EmployeeDao dao &#x3D; openSession.getMapper(EmployeeDao.class);</span><br><span class="line">		try &#123;</span><br><span class="line">			</span><br><span class="line">			Employee employee &#x3D; dao.getEmpById(1);</span><br><span class="line">			System.out.println(employee);</span><br><span class="line">		&#125;finally &#123;</span><br><span class="line">			openSession.close();</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="1-4-2-2-传参问题测试实例源码"><a href="#1-4-2-2-传参问题测试实例源码" class="headerlink" title="1.4.2.2 传参问题测试实例源码"></a><h id="1.4.2.2">1.4.2.2 传参问题测试实例源码</h></h3><p><img src="/posts/a7d5b03b/1-4-2-2.png"></p><h4 id="package-com-lizhi-dao-1"><a href="#package-com-lizhi-dao-1" class="headerlink" title="package com.lizhi.dao;"></a>package com.lizhi.dao;</h4><h4 id="EmployeeDao-java"><a href="#EmployeeDao-java" class="headerlink" title="EmployeeDao.java"></a>EmployeeDao.java</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">package com.lizhi.dao;</span><br><span class="line"></span><br><span class="line">import java.util.List;</span><br><span class="line">import java.util.Map;</span><br><span class="line"></span><br><span class="line">import org.apache.ibatis.annotations.MapKey;</span><br><span class="line">import org.apache.ibatis.annotations.Param;</span><br><span class="line"></span><br><span class="line">import com.lizhi.bean.Employee;</span><br><span class="line"></span><br><span class="line">public interface EmployeeDao &#123;</span><br><span class="line"></span><br><span class="line">	&#x2F;&#x2F;查询</span><br><span class="line">	public Employee getEmpById(Integer id);</span><br><span class="line">	public Employee getEmpByIdAndEmpname(@Param(&quot;id&quot;)Integer id,@Param(&quot;empname&quot;)String empname);</span><br><span class="line">	public Employee getEmployeeAndEmpname(Map&lt;String, Object&gt;map);</span><br><span class="line">	&#x2F;&#x2F;查询所有员工</span><br><span class="line">	public List&lt;Employee&gt; getAllEmps();</span><br><span class="line">	&#x2F;&#x2F;查询返回map，默认会把列名作为Key,值作为Value</span><br><span class="line">	public Map&lt;String, Object&gt; getEmpByIdReturnMap(Integer id);</span><br><span class="line">	&#x2F;&#x2F;查询多条信息,key就是记录的主键，value就是这条记录封装好的对象\@MapKey(&quot;id&quot;)指定用查询出的id的值作为key封装查询的信息</span><br><span class="line">	@MapKey(&quot;id&quot;)</span><br><span class="line">	public Map&lt;Integer, Employee&gt; getEmpsReturnMap();</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	&#x2F;&#x2F;更新</span><br><span class="line">	public int updateEmployee(Employee employee);</span><br><span class="line">	&#x2F;&#x2F;删除</span><br><span class="line">	public boolean deleteEmployee(Integer id);</span><br><span class="line">	&#x2F;&#x2F;插入</span><br><span class="line">	public int insertEmployee(Employee employee);</span><br><span class="line">	</span><br><span class="line">	public int insertEmployee2(Employee employee);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="CatDao-java"><a href="#CatDao-java" class="headerlink" title="CatDao.java"></a>CatDao.java</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">package com.lizhi.dao;</span><br><span class="line"></span><br><span class="line">import com.lizhi.bean.Cat;</span><br><span class="line"></span><br><span class="line">public interface CatDao &#123;</span><br><span class="line">	</span><br><span class="line">	public Cat getCatById(Integer id);</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="package-com-lizhi-bean"><a href="#package-com-lizhi-bean" class="headerlink" title="package com.lizhi.bean"></a>package com.lizhi.bean</h4><h4 id="Employee-java-3"><a href="#Employee-java-3" class="headerlink" title="Employee.java"></a>Employee.java</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">package com.lizhi.bean;</span><br><span class="line"></span><br><span class="line">public class Employee &#123;</span><br><span class="line"></span><br><span class="line">	private Integer id;</span><br><span class="line">	private String empname;</span><br><span class="line">	private String email;</span><br><span class="line">	private Integer gender;</span><br><span class="line">	private String loginAccount;</span><br><span class="line">		</span><br><span class="line">	public String getLoginAccount() &#123;</span><br><span class="line">		return loginAccount;</span><br><span class="line">	&#125;</span><br><span class="line">	public void setLoginAccount(String loginAccount) &#123;</span><br><span class="line">		this.loginAccount &#x3D; loginAccount;</span><br><span class="line">	&#125;</span><br><span class="line">	&#x2F;&#x2F;写完无参构造器后必须再写个有参的构造器</span><br><span class="line">	public Employee() &#123;</span><br><span class="line">		super();</span><br><span class="line">	&#125;</span><br><span class="line">	public Employee(Integer id, String empname, String email, Integer gender) &#123;</span><br><span class="line">		super();</span><br><span class="line">		this.id &#x3D; id;</span><br><span class="line">		this.empname &#x3D; empname;</span><br><span class="line">		this.email &#x3D; email;</span><br><span class="line">		this.gender &#x3D; gender;</span><br><span class="line">	&#125;</span><br><span class="line">	public Integer getId() &#123;</span><br><span class="line">		return id;</span><br><span class="line">	&#125;</span><br><span class="line">	public void setId(Integer id) &#123;</span><br><span class="line">		this.id &#x3D; id;</span><br><span class="line">	&#125;</span><br><span class="line">	public String getEmpname() &#123;</span><br><span class="line">		return empname;</span><br><span class="line">	&#125;</span><br><span class="line">	public void setEmpname(String empname) &#123;</span><br><span class="line">		this.empname &#x3D; empname;</span><br><span class="line">	&#125;</span><br><span class="line">	public String getEmail() &#123;</span><br><span class="line">		return email;</span><br><span class="line">	&#125;</span><br><span class="line">	public void setEmail(String email) &#123;</span><br><span class="line">		this.email &#x3D; email;</span><br><span class="line">	&#125;</span><br><span class="line">	public Integer getGender() &#123;</span><br><span class="line">		return gender;</span><br><span class="line">	&#125;</span><br><span class="line">	public void setGender(Integer gender) &#123;</span><br><span class="line">		this.gender &#x3D; gender;</span><br><span class="line">	&#125;</span><br><span class="line">	@Override</span><br><span class="line">	public String toString() &#123;</span><br><span class="line">		return &quot;Employee [id&#x3D;&quot; + id + &quot;, empname&#x3D;&quot; + empname + &quot;, email&#x3D;&quot; + email + &quot;, gender&#x3D;&quot; + gender</span><br><span class="line">				+ &quot;, loginAccount&#x3D;&quot; + loginAccount + &quot;]&quot;;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="Cat-java"><a href="#Cat-java" class="headerlink" title="Cat.java"></a>Cat.java</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">package com.lizhi.bean;</span><br><span class="line"></span><br><span class="line">public class Cat &#123;</span><br><span class="line">	</span><br><span class="line">	private Integer id;</span><br><span class="line">	private String name;</span><br><span class="line">	private Integer gender;</span><br><span class="line">	private Integer age;</span><br><span class="line">	public Integer getId() &#123;</span><br><span class="line">		return id;</span><br><span class="line">	&#125;</span><br><span class="line">	public void setId(Integer id) &#123;</span><br><span class="line">		this.id &#x3D; id;</span><br><span class="line">	&#125;</span><br><span class="line">	public String getName() &#123;</span><br><span class="line">		return name;</span><br><span class="line">	&#125;</span><br><span class="line">	public void setName(String name) &#123;</span><br><span class="line">		this.name &#x3D; name;</span><br><span class="line">	&#125;</span><br><span class="line">	public Integer getGender() &#123;</span><br><span class="line">		return gender;</span><br><span class="line">	&#125;</span><br><span class="line">	public void setGender(Integer gender) &#123;</span><br><span class="line">		this.gender &#x3D; gender;</span><br><span class="line">	&#125;</span><br><span class="line">	public Integer getAge() &#123;</span><br><span class="line">		return age;</span><br><span class="line">	&#125;</span><br><span class="line">	public void setAge(Integer age) &#123;</span><br><span class="line">		this.age &#x3D; age;</span><br><span class="line">	&#125;</span><br><span class="line">	@Override</span><br><span class="line">	public String toString() &#123;</span><br><span class="line">		return &quot;cat [id&#x3D;&quot; + id + &quot;, name&#x3D;&quot; + name + &quot;, gender&#x3D;&quot; + gender + &quot;, age&#x3D;&quot; + age + &quot;]&quot;;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="4-MyBatis-sqlMapper-conf-com-lizhi-dao-CatDao-xml"><a href="#4-MyBatis-sqlMapper-conf-com-lizhi-dao-CatDao-xml" class="headerlink" title="/4.MyBatis_sqlMapper/conf/com/lizhi/dao/CatDao.xml"></a>/4.MyBatis_sqlMapper/conf/com/lizhi/dao/<h id="1.4.2.2.2">CatDao.xml</h></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;!DOCTYPE mapper</span><br><span class="line">  PUBLIC &quot;-&#x2F;&#x2F;mybatis.org&#x2F;&#x2F;DTD Mapper 3.0&#x2F;&#x2F;EN&quot;</span><br><span class="line">  &quot;http:&#x2F;&#x2F;mybatis.org&#x2F;dtd&#x2F;mybatis-3-mapper.dtd&quot;&gt;</span><br><span class="line">  </span><br><span class="line">&lt;mapper namespace&#x3D;&quot;com.lizhi.dao.CatDao&quot;&gt;</span><br><span class="line">&lt;!-- public cat getCatById(Integer id); --&gt;</span><br><span class="line">	&lt;!-- resultType&#x3D;&quot;com.lizhi.bean.Cat&quot;:使用默认规则，属性名列名一一对应</span><br><span class="line">		 resultMap&#x3D;&quot;myCat&quot;:查出数据封装结果的时候，使用myCat自定义的结果集，</span><br><span class="line">	 --&gt;</span><br><span class="line">	&lt;select id&#x3D;&quot;getCatById&quot; resultMap&#x3D;&quot;myCat&quot;&gt;</span><br><span class="line">		&lt;!-- 这样可以用起别名的方法配合resultType&#x3D;&quot;com.lizhi.bean.Cat&quot;:使用默认规则，属性名列名一一对应</span><br><span class="line">		 select id,cname name,cAge age,cgender gender from t_cat where id&#x3D;#&#123;id&#125; --&gt;</span><br><span class="line">		&lt;!-- 这样不可以用 --&gt;</span><br><span class="line">		select * from t_cat where id&#x3D;#&#123;id&#125;</span><br><span class="line">	&lt;&#x2F;select&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;!-- 自定义结果集(resultMap)，自己定义每一列数据和JavaBean的映射规则</span><br><span class="line">		type&#x3D;&quot;&quot; :制定要为哪个JavaBean自定义封装规则,全类名</span><br><span class="line">		id&#x3D;&quot;&quot;:唯一标识</span><br><span class="line">	 --&gt;</span><br><span class="line">	&lt;resultMap type&#x3D;&quot;com.lizhi.bean.Cat&quot; id&#x3D;&quot;myCat&quot;&gt;</span><br><span class="line">		&lt;!-- 指定主键列的对应规则 </span><br><span class="line">			column&#x3D;&quot;id&quot;:指定那一列是主键列</span><br><span class="line">			property&#x3D;&quot;&quot;:指定Cat.java文件里的哪个属性封装id这一列数据</span><br><span class="line">		--&gt;</span><br><span class="line">		&lt;id property&#x3D;&quot;id&quot; column&#x3D;&quot;id&quot;&#x2F;&gt;</span><br><span class="line">		&lt;!-- 普通列 --&gt;</span><br><span class="line">		&lt;result property&#x3D;&quot;name&quot; column&#x3D;&quot;cName&quot;&#x2F;&gt;</span><br><span class="line">		&lt;result property&#x3D;&quot;age&quot; column&#x3D;&quot;cAge&quot;&#x2F;&gt;</span><br><span class="line">		&lt;result property&#x3D;&quot;gender&quot; column&#x3D;&quot;cgender&quot;&#x2F;&gt;</span><br><span class="line">		</span><br><span class="line">		&lt;association property&#x3D;&quot;&quot;&gt;&lt;&#x2F;association&gt;</span><br><span class="line">	&lt;&#x2F;resultMap&gt;</span><br><span class="line"></span><br><span class="line">&lt;&#x2F;mapper&gt;</span><br></pre></td></tr></table></figure><h4 id="4-MyBatis-sqlMapper-conf-com-lizhi-dao-EmployeeDao-xml"><a href="#4-MyBatis-sqlMapper-conf-com-lizhi-dao-EmployeeDao-xml" class="headerlink" title="/4.MyBatis_sqlMapper/conf/com/lizhi/dao/EmployeeDao.xml"></a>/4.MyBatis_sqlMapper/conf/com/lizhi/dao/<h id="1.4.2.2.1">EmployeeDao.xml</h></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;!DOCTYPE mapper</span><br><span class="line">  PUBLIC &quot;-&#x2F;&#x2F;mybatis.org&#x2F;&#x2F;DTD Mapper 3.0&#x2F;&#x2F;EN&quot;</span><br><span class="line">  &quot;http:&#x2F;&#x2F;mybatis.org&#x2F;dtd&#x2F;mybatis-3-mapper.dtd&quot;&gt;</span><br><span class="line">  </span><br><span class="line">&lt;!-- namespace&#x3D;&quot;&quot;:写dao接口的全类名 --&gt;  </span><br><span class="line">  &lt;mapper namespace&#x3D;&quot;com.lizhi.dao.EmployeeDao&quot;&gt;</span><br><span class="line">  </span><br><span class="line">&lt;!-- 这个文件中能写能写的所有标签 </span><br><span class="line">cache:和缓存有关</span><br><span class="line">cache-ref:和缓存有关</span><br><span class="line">delete,update,inster,select:增删改查</span><br><span class="line">resultmap:结果映射，自定义结果集的封装规则</span><br><span class="line">sql:抽取可重用的sql</span><br><span class="line"></span><br><span class="line">delete,update,inster,select:增删改查里的属性</span><br><span class="line"></span><br><span class="line">--&gt;  </span><br><span class="line"></span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">&lt;!-- 传参到底能传哪些 --&gt; </span><br><span class="line">&lt;!-- public Employee getEmpById(Integer id); --&gt;</span><br><span class="line">	&lt;select id&#x3D;&quot;getEmpById&quot; resultType&#x3D;&quot;com.lizhi.bean.Employee&quot;&gt;</span><br><span class="line">		SELECT * FROM t_employee WHERE id&#x3D;#&#123;id&#125;</span><br><span class="line">	&lt;&#x2F;select&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--</span><br><span class="line">如果采用没有采用@param的方式 id&#x3D;#&#123;id&#125; and empname&#x3D;#&#123;empname&#125;的方式来传入参数会报如下异常</span><br><span class="line"> org.apache.ibatis.exceptions.PersistenceException: </span><br><span class="line">### Error querying database.  Cause: org.apache.ibatis.binding.BindingException: </span><br><span class="line">Parameter &#39;id&#39; not found. Available parameters are [arg1, arg0, param1, param2]</span><br><span class="line">而改成id&#x3D;#&#123;param1&#125; and empname&#x3D;#&#123;param2&#125;或者改成arg1, arg0则可运行（param1, param2，param3, param4）</span><br><span class="line"> --&gt;</span><br><span class="line">&lt;!-- public Employee getEmpByIdAndEmpname(Integer id,String empname); --&gt;</span><br><span class="line">	&lt;select id&#x3D;&quot;getEmpByIdAndEmpname&quot; resultType&#x3D;&quot;com.lizhi.bean.Employee&quot;&gt;</span><br><span class="line">		select * from t_employee where id&#x3D;#&#123;id&#125; and empname&#x3D;#&#123;empname&#125;</span><br><span class="line">	&lt;&#x2F;select&gt;</span><br><span class="line">	</span><br><span class="line">&lt;!-- public Employee getEmployeeAndEmpname(Map&lt;String, Override&gt;map); --&gt;</span><br><span class="line">	&lt;select id&#x3D;&quot;getEmployeeAndEmpname&quot; resultType&#x3D;&quot;com.lizhi.bean.Employee&quot;&gt;</span><br><span class="line">		select * from $&#123;tablename&#125; where id&#x3D;#&#123;id&#125; and empname&#x3D;#&#123;empname&#125;</span><br><span class="line">	&lt;&#x2F;select&gt;</span><br><span class="line">	</span><br><span class="line">&lt;!-- 现象：</span><br><span class="line">	1.传入单个参数：</span><br><span class="line">		①基本类型：</span><br><span class="line">			取值：#&#123;随便写&#125;</span><br><span class="line">		②传入pojo:</span><br><span class="line">	2.多个参数：</span><br><span class="line">		public Employee getEmpByIdAndEmpname(Integer id,String empname);</span><br><span class="line">		取值：#&#123;参数名&#125;的方式无效</span><br><span class="line">		可以用id&#x3D;#&#123;param1&#125; and empname&#x3D;#&#123;param2&#125;或者改成arg1, arg0的方式</span><br><span class="line">		原因：只要传入了多个参数MyBatis会自动的将这些参数封装在map中，封装是使用的key就是参数的索引和参数的第几个表示</span><br><span class="line">			Map&lt;String,Object&gt; map &#x3D; new HashMap&lt;&gt;();</span><br><span class="line">			map.put(&quot;arg1&quot;,传入的值);map.put(&quot;arg1&quot;,&quot;传入的值&quot;)；</span><br><span class="line">		#&#123;Key&#125;就是从map中取值</span><br><span class="line">	3.@param:为参数指定key;命名参数；推荐使用此方法</span><br><span class="line">	 我们可以告诉MyBatis，封装参数map的时候别乱来，使用我们指定的Key</span><br><span class="line">		public Employee getEmpByIdAndEmpname(@Param(&quot;id&quot;)Integer id,@Param(&quot;empname&quot;)String empname);</span><br><span class="line">	4.传入pojo(javaBean)</span><br><span class="line">		取值：#&#123;pojo的属性名&#125;</span><br><span class="line">	5.传入map:将多个要使用的参数封装起来</span><br><span class="line">		取值：#&#123;key&#125;</span><br><span class="line">	扩展：多个参数：自动封装map;多种方式混合</span><br><span class="line">	method01(@param(&quot;id&quot;)Integer id,String empname,Employee employee);</span><br><span class="line">	Integwe id -&gt;#&#123;id&#125;</span><br><span class="line">	String empname -&gt; #&#123;param2&#125;</span><br><span class="line">	Employee employee (取出这个里面的email) -&gt;#&#123;param3.email&#125;</span><br><span class="line">	</span><br><span class="line">	无论传入什么参数都要能正确的取出值；</span><br><span class="line">	#&#123;key&#x2F;属性名&#125;</span><br><span class="line">	1. #&#123;key&#125;取值的时候可以设置一些规则</span><br><span class="line">		id&#x3D;#&#123;id,jdbcType&#x3D;INTEFER&#125;都是自动配置的所以可以不写</span><br><span class="line">		javaType,jdbcType,mode,numericScale,resultMap.typeHandler,jdbcTypeName,expression</span><br><span class="line">		只有jdbcType才可能是需要被指定的，默认不指定jdbcType，mysql没问题，oracle没问题，</span><br><span class="line">		万一传入的数据是null,mysql插入null没问题，【oracle不指定null到底是什么类型】</span><br><span class="line">	</span><br><span class="line">	实际上在MyBatis中，有两种取值方式：</span><br><span class="line">		#&#123;属性名&#125;: 是参数预编译的方式，参数的位置都是用？替代，参数后来都是预编译设置进去的；安全，不会有sql注入的问题</span><br><span class="line">		$&#123;属性名&#125;: 不是参数预编译，而是直接和sql语句进行拼串；不安全，就是将参数直接放在指定的位置运行</span><br><span class="line">				 &#x2F;&#x2F;id&#x3D; &#39;传入的字符串&#39; and empname&#x3D;</span><br><span class="line">				  如果传入&#39;1 or 1&#x3D;1 or&#39;，则不管and后面有没有东西or 后面的 1&#x3D;1永远是true，就会通过验证访问数据库的内容，这就是sql注入</span><br><span class="line">				$&#123;属性名&#125;用处：sql语句只有参数位置是支持预编译的,表名等不支持预编译；假设有一个数据库里面有两张日志表</span><br><span class="line">					log_2019_11,log_2019_12</span><br><span class="line">					select * from log_2019_11 where id&#x3D;? and empname&#x3D;?</span><br><span class="line">					需求，id,empname固定查询不同日志表里的日志</span><br><span class="line">				解决办法：在getEmployeeAndEmpname方法里测试</span><br><span class="line">					采取这种方法可行select * from $&#123;tablename&#125; where id&#x3D;#&#123;id&#125; and empname&#x3D;#&#123;empname&#125;</span><br><span class="line">					</span><br><span class="line">		在getEmployeeAndEmpname方法里测试</span><br><span class="line">		id&#x3D;$&#123;id&#125; and empname&#x3D;#&#123;empname&#125;</span><br><span class="line">		打印的日志	select * from t_employee where id&#x3D;1 and empname&#x3D;? </span><br><span class="line">		</span><br><span class="line">		id&#x3D;#&#123;id&#125; and empname&#x3D;#&#123;empname&#125;</span><br><span class="line">		打印的日志 select * from t_employee where id&#x3D;? and empname&#x3D;?</span><br><span class="line">		</span><br><span class="line">		一般使用#&#123;&#125;因为安全，在不支持参数预编译的位置要进行取值就使用$&#123;&#125;;</span><br><span class="line">--&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 查询所有员工public List&lt;Employee&gt; getAllEmps(); --&gt;</span><br><span class="line">	&lt;!-- resultType&#x3D;&quot;&quot;如果返回的是个集合，写的是集合里面的元素的类型 --&gt;	</span><br><span class="line">	&lt;select id&#x3D;&quot;getAllEmps&quot; resultType&#x3D;&quot;com.lizhi.bean.Employee&quot;&gt;</span><br><span class="line">		select * from t_employee</span><br><span class="line">	&lt;&#x2F;select&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 查询返回map --&gt;	</span><br><span class="line">	&lt;!-- public Map&lt;String, Object&gt; getEmpByIdReturnMap(Integer id); --&gt;</span><br><span class="line">	&lt;select id&#x3D;&quot;getEmpByIdReturnMap&quot; resultType&#x3D;&quot;map&quot;&gt;</span><br><span class="line">		select * from t_employee where id&#x3D;#&#123;id&#125;	</span><br><span class="line">	&lt;&#x2F;select&gt;</span><br><span class="line">	&lt;!-- 查询多个返回一个map ，查询多个情况下，集合里面写元素类型</span><br><span class="line">		public Map&lt;Integer, Employee&gt; getEmpsReturnMap(); --&gt;</span><br><span class="line">	&lt;select id&#x3D;&quot;getEmpsReturnMap&quot; resultType&#x3D;&quot;com.lizhi.bean.Employee&quot;&gt;</span><br><span class="line">		select * from t_employee </span><br><span class="line">	&lt;&#x2F;select&gt;</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">&lt;!-- public int updateEmployee(Employee employee); --&gt;</span><br><span class="line">	&lt;update id&#x3D;&quot;updateEmployee&quot; &gt;</span><br><span class="line">		update t_employee set empname&#x3D;#&#123;empname&#125;, gender&#x3D;#&#123;gender&#125; ,email&#x3D;#&#123;email&#125; where id&#x3D;#&#123;id&#125;</span><br><span class="line">	&lt;&#x2F;update&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- public boolean deleteEmployee(Integer id); --&gt;</span><br><span class="line">	&lt;delete id&#x3D;&quot;deleteEmployee&quot;&gt;</span><br><span class="line">		DELETE FROM t_employee WHERE id&#x3D;#&#123;id&#125;</span><br><span class="line">	&lt;&#x2F;delete&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- public int insertEmployee(Employee employee); --&gt;</span><br><span class="line">	&lt;!-- 让Mybatis自动的将自增的id赋值给传入的employee对象的id的属性 </span><br><span class="line">		useGeneratedKeys&#x3D;”true”，原生jdbc获取自增主键的方法</span><br><span class="line">		keyProperty&#x3D;&quot;&quot;:将刚才自增的id赋值给那个属性</span><br><span class="line">	--&gt;</span><br><span class="line">	&lt;insert id&#x3D;&quot;insertEmployee&quot;  useGeneratedKeys&#x3D;&quot;true&quot; keyProperty&#x3D;&quot;id&quot;&gt;</span><br><span class="line">		INSERT INTO t_employee(empname,gender,email) VALUES(#&#123;empname&#125;,#&#123;gender&#125;,#&#123;email&#125;)</span><br><span class="line">	&lt;&#x2F;insert&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- public int insertEmployee2(Employee employee); --&gt;</span><br><span class="line">	&lt;insert id&#x3D;&quot;insertEmployee2&quot;&gt;</span><br><span class="line">	&lt;!-- 对于不支持自增主键的数据库采用查询主键的方式</span><br><span class="line">			order&#x3D;&quot;BEFORE&quot;:</span><br><span class="line">				在核心sql语句之前先运行一个查询个查询sql查到id,将查到的id赋值给JavaBean的哪个属性；</span><br><span class="line">				获取最大的id值再+1赋值给id达到自增的目的</span><br><span class="line">		 --&gt;</span><br><span class="line">		&lt;selectKey order&#x3D;&quot;BEFORE&quot; resultType&#x3D;&quot;integer&quot; keyProperty&#x3D;&quot;id&quot;&gt;</span><br><span class="line">			select max(id)+1 from t_employee		</span><br><span class="line">		&lt;&#x2F;selectKey&gt;</span><br><span class="line">		INSERT INTO t_employee(id,empname,gender,email) VALUES(#&#123;id&#125;,#&#123;empname&#125;,#&#123;gender&#125;,#&#123;email&#125;)</span><br><span class="line">	&lt;&#x2F;insert&gt;</span><br><span class="line">  &lt;&#x2F;mapper&gt;</span><br></pre></td></tr></table></figure><h4 id="log4j-properties-3"><a href="#log4j-properties-3" class="headerlink" title="log4j.properties"></a>log4j.properties</h4><p><a href="#1.3.3.2">log4j.properties</a></p><h4 id="log4j-xml-3"><a href="#log4j-xml-3" class="headerlink" title="log4j.xml"></a>log4j.xml</h4><p><a href="#1.3.3.1">log4j.xml</a></p><h4 id="mybatis-config-xml-3"><a href="#mybatis-config-xml-3" class="headerlink" title="mybatis-config.xml"></a>mybatis-config.xml</h4><p><a href="#1.4.3.2">mybatis-config.xml</a></p><h4 id="package-com-lizhi-test"><a href="#package-com-lizhi-test" class="headerlink" title="package com.lizhi.test"></a>package com.lizhi.test</h4><h4 id="MyBatisTest-java"><a href="#MyBatisTest-java" class="headerlink" title="MyBatisTest.java"></a>MyBatisTest.java</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br></pre></td><td class="code"><pre><span class="line">package com.lizhi.test;</span><br><span class="line"></span><br><span class="line">import static org.junit.jupiter.api.Assertions.*;</span><br><span class="line"></span><br><span class="line">import java.io.IOException;</span><br><span class="line">import java.io.InputStream;</span><br><span class="line">import java.util.HashMap;</span><br><span class="line">import java.util.List;</span><br><span class="line">import java.util.Map;</span><br><span class="line"></span><br><span class="line">import org.apache.ibatis.io.Resources;</span><br><span class="line">import org.apache.ibatis.session.SqlSession;</span><br><span class="line">import org.apache.ibatis.session.SqlSessionFactory;</span><br><span class="line">import org.apache.ibatis.session.SqlSessionFactoryBuilder;</span><br><span class="line">import org.junit.Before;</span><br><span class="line">import org.junit.jupiter.api.Test;</span><br><span class="line"></span><br><span class="line">import com.lizhi.bean.Employee;</span><br><span class="line">import com.lizhi.bean.Cat;</span><br><span class="line">import com.lizhi.dao.CatDao;</span><br><span class="line">import com.lizhi.dao.EmployeeDao;</span><br><span class="line"></span><br><span class="line">public class MyBatisTest &#123;</span><br><span class="line"></span><br><span class="line">	&#x2F;&#x2F;工厂一个</span><br><span class="line">		SqlSessionFactory sqlSessionFactory;</span><br><span class="line">		</span><br><span class="line">		@Before</span><br><span class="line">		public void initSqlSessionFactory() throws IOException &#123;</span><br><span class="line">			&#x2F;&#x2F;1.跟据全局配置文件先得到SqlSessionFactory对象(官方文档复制)，快捷键Ctrl+shift+O导包</span><br><span class="line">					String resource &#x3D; &quot;mybatis-config.xml&quot;;</span><br><span class="line">					InputStream inputStream &#x3D; Resources.getResourceAsStream(resource);</span><br><span class="line">					sqlSessionFactory &#x3D; new SqlSessionFactoryBuilder().build(inputStream);</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		&#x2F;*</span><br><span class="line">		 * 测试t_cat表，当数据库列名与bean中的cat.java字段不对应时该如何做</span><br><span class="line">		 * 默认MyBatis自动封装结果集；</span><br><span class="line">		 * 1.按照列名和属性名一一对应的规则且不区分大小写</span><br><span class="line">		 * 2.如果不一一对应</span><br><span class="line">		 * 		①，开启驼峰命名法（满足驼峰命名规则数据库中是aaa_bbb,bean中是aaaBbb）</span><br><span class="line">		 * 		②，起别名，写sql语句时，由于数据库不区分大小写cName和cname是一样</span><br><span class="line">		 * 			select id,cname name,cAge age,cgender gender from t_cat where id&#x3D;#&#123;id&#125;</span><br><span class="line">		 *3.使用resultMap自定义结果集</span><br><span class="line">		 *&#x2F;</span><br><span class="line">	</span><br><span class="line">		@Test</span><br><span class="line">		public void test09() throws IOException &#123;</span><br><span class="line">			initSqlSessionFactory();</span><br><span class="line">			SqlSession openSession &#x3D; sqlSessionFactory.openSession();</span><br><span class="line">			</span><br><span class="line">			try &#123;</span><br><span class="line">				CatDao mapper &#x3D; openSession.getMapper(CatDao.class);</span><br><span class="line">				Cat catById &#x3D; mapper.getCatById(1);</span><br><span class="line">				System.out.println(catById);</span><br><span class="line">			&#125; finally &#123;</span><br><span class="line">				&#x2F;&#x2F; TODO: handle finally clause</span><br><span class="line">				openSession.close();</span><br><span class="line">			&#125;</span><br><span class="line">			</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		</span><br><span class="line">		&#x2F;**</span><br><span class="line">		 * 测试不支持自增查询id的方法</span><br><span class="line">		 * </span><br><span class="line">		 *&#x2F;</span><br><span class="line">		@Test</span><br><span class="line">		public void test03() throws IOException &#123;</span><br><span class="line">			initSqlSessionFactory();</span><br><span class="line">			SqlSession openSession &#x3D; sqlSessionFactory.openSession();</span><br><span class="line">			</span><br><span class="line">			try &#123;</span><br><span class="line">				EmployeeDao employeeDao &#x3D; openSession.getMapper(EmployeeDao.class);</span><br><span class="line">				Employee employee &#x3D; new Employee(1,&quot;baba&quot;,&quot;4567218@qq.com&quot;,0);</span><br><span class="line">				int i &#x3D;employeeDao.insertEmployee(employee);</span><br><span class="line">				System.out.println(&quot;---&gt;&quot;+i);</span><br><span class="line">				System.out.println(&quot;刚才插入的id:&quot;+employee.getId());</span><br><span class="line">			&#125; finally &#123;</span><br><span class="line">				&#x2F;&#x2F; TODO: handle finally clause</span><br><span class="line">				openSession.close();</span><br><span class="line">			&#125;</span><br><span class="line">			</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		</span><br><span class="line">		&#x2F;**</span><br><span class="line">		 * 测试insert标签的useGeneratedKeys&#x3D;&quot;true&quot; keyProperty&#x3D;&quot;id&quot;</span><br><span class="line">		 * @throws IOException</span><br><span class="line">		 *&#x2F;</span><br><span class="line">		@Test</span><br><span class="line">		public void test01() throws IOException &#123;</span><br><span class="line">			initSqlSessionFactory();</span><br><span class="line">			SqlSession openSession &#x3D; sqlSessionFactory.openSession();</span><br><span class="line">			</span><br><span class="line">			try &#123;</span><br><span class="line">				EmployeeDao employeeDao &#x3D; openSession.getMapper(EmployeeDao.class);</span><br><span class="line">				Employee employee &#x3D; new Employee(null,&quot;baba&quot;,&quot;4567218@qq.com&quot;,0);</span><br><span class="line">				int i &#x3D;employeeDao.insertEmployee(employee);</span><br><span class="line">				System.out.println(&quot;---&gt;&quot;+i);</span><br><span class="line">				System.out.println(&quot;刚才插入的id:&quot;+employee.getId());</span><br><span class="line">			&#125; finally &#123;</span><br><span class="line">				&#x2F;&#x2F; TODO: handle finally clause</span><br><span class="line">				openSession.close();</span><br><span class="line">			&#125;</span><br><span class="line">			</span><br><span class="line">		&#125;</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	@Test</span><br><span class="line">	public void test() throws IOException &#123;</span><br><span class="line">		initSqlSessionFactory();</span><br><span class="line">		SqlSession openSession &#x3D; sqlSessionFactory.openSession();</span><br><span class="line">		</span><br><span class="line">		try &#123;</span><br><span class="line">			EmployeeDao employeeDao &#x3D; openSession.getMapper(EmployeeDao.class);</span><br><span class="line">			Employee empById &#x3D; employeeDao.getEmpById(1);</span><br><span class="line">			System.out.println(empById);</span><br><span class="line">		&#125; finally &#123;</span><br><span class="line">			&#x2F;&#x2F; TODO: handle finally clause</span><br><span class="line">			openSession.close();</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	&#x2F;*</span><br><span class="line">	 * 测试查询时可以传入什么参数</span><br><span class="line">	 * 同时查询id和empname</span><br><span class="line">	 * </span><br><span class="line">	 *&#x2F;</span><br><span class="line">	@Test</span><br><span class="line">	public void test04() throws IOException &#123;</span><br><span class="line">		initSqlSessionFactory();</span><br><span class="line">		SqlSession openSession &#x3D; sqlSessionFactory.openSession();</span><br><span class="line">		</span><br><span class="line">		try &#123;</span><br><span class="line">			EmployeeDao employeeDao &#x3D; openSession.getMapper(EmployeeDao.class);</span><br><span class="line">			Employee emplyee &#x3D; employeeDao.getEmpByIdAndEmpname(1, &quot;baba&quot;);</span><br><span class="line">			System.out.println(emplyee);</span><br><span class="line">		&#125; finally &#123;</span><br><span class="line">			&#x2F;&#x2F; TODO: handle finally clause</span><br><span class="line">			openSession.close();</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	&#x2F;*</span><br><span class="line">	 * 测试传入map的方式传入多个参数</span><br><span class="line">	 *&#x2F;</span><br><span class="line">	@Test</span><br><span class="line">	public void test05() throws IOException &#123;</span><br><span class="line">		initSqlSessionFactory();</span><br><span class="line">		SqlSession openSession &#x3D; sqlSessionFactory.openSession();</span><br><span class="line">		</span><br><span class="line">		try &#123;</span><br><span class="line">			EmployeeDao employeeDao &#x3D; openSession.getMapper(EmployeeDao.class);</span><br><span class="line">			Map&lt;String, Object&gt; map &#x3D; new HashMap&lt;String, Object&gt;();</span><br><span class="line">			map.put(&quot;id&quot;, 1);</span><br><span class="line">			map.put(&quot;empname&quot;, &quot;admin&quot;);</span><br><span class="line">			map.put(&quot;tablename&quot;, &quot;t_employee&quot;);</span><br><span class="line">			Employee emplyee &#x3D; employeeDao.getEmployeeAndEmpname(map);</span><br><span class="line">			</span><br><span class="line">			System.out.println(emplyee);</span><br><span class="line">		&#125; finally &#123;</span><br><span class="line">			&#x2F;&#x2F; TODO: handle finally clause</span><br><span class="line">			openSession.close();</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	&#x2F;**</span><br><span class="line">	 * 测试传入List集合</span><br><span class="line">	 *&#x2F;</span><br><span class="line">	@Test</span><br><span class="line">	public void test06() throws IOException &#123;</span><br><span class="line">		initSqlSessionFactory();</span><br><span class="line">		SqlSession openSession &#x3D; sqlSessionFactory.openSession();</span><br><span class="line">		</span><br><span class="line">		try &#123;</span><br><span class="line">			EmployeeDao employeeDao &#x3D; openSession.getMapper(EmployeeDao.class);</span><br><span class="line">			List&lt;Employee&gt; allmaps &#x3D; employeeDao.getAllEmps();</span><br><span class="line">			for (Employee employee : allmaps) &#123;</span><br><span class="line">				System.out.println(employee);</span><br><span class="line">			&#125;</span><br><span class="line">			System.out.println();</span><br><span class="line">		&#125; finally &#123;</span><br><span class="line">			&#x2F;&#x2F; TODO: handle finally clause</span><br><span class="line">			openSession.close();</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	&#x2F;**</span><br><span class="line">	 * 测试查询map查询单条记录封装map</span><br><span class="line">	 *&#x2F;</span><br><span class="line">	@Test</span><br><span class="line">	public void test07() throws IOException &#123;</span><br><span class="line">		initSqlSessionFactory();</span><br><span class="line">		SqlSession openSession &#x3D; sqlSessionFactory.openSession();</span><br><span class="line">		</span><br><span class="line">		try &#123;</span><br><span class="line">			EmployeeDao employeeDao &#x3D; openSession.getMapper(EmployeeDao.class);</span><br><span class="line">			Map&lt;String, Object&gt; map &#x3D; employeeDao.getEmpByIdReturnMap(1);</span><br><span class="line">			System.out.println(map);</span><br><span class="line">		&#125; finally &#123;</span><br><span class="line">			&#x2F;&#x2F; TODO: handle finally clause</span><br><span class="line">			openSession.close();</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	&#x2F;**</span><br><span class="line">	 * 测试查询map查询多条记录封装map</span><br><span class="line">	 *&#x2F;</span><br><span class="line">	@Test</span><br><span class="line">	public void test08() throws IOException &#123;</span><br><span class="line">		initSqlSessionFactory();</span><br><span class="line">		SqlSession openSession &#x3D; sqlSessionFactory.openSession();</span><br><span class="line">		</span><br><span class="line">		try &#123;</span><br><span class="line">			EmployeeDao employeeDao &#x3D; openSession.getMapper(EmployeeDao.class);</span><br><span class="line">			Map&lt;Integer, Employee&gt; map &#x3D; employeeDao.getEmpsReturnMap();</span><br><span class="line">			System.out.println(map);</span><br><span class="line">			&#x2F;&#x2F;这时打印的是一条记录</span><br><span class="line">			Employee employee &#x3D; map.get(1);</span><br><span class="line">			System.out.println(employee);</span><br><span class="line">		&#125; finally &#123;</span><br><span class="line">			&#x2F;&#x2F; TODO: handle finally clause</span><br><span class="line">			openSession.close();</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></div><div class="article-footer"><blockquote class="mt-2x"><ul class="post-copyright list-unstyled"><li class="post-copyright-link hidden-xs"><strong>本文链接：</strong> <a href="http://www.studyz.club/posts/a7d5b03b/" title="软件开发框架之MyBatis" target="_blank" rel="external">http://www.studyz.club/posts/a7d5b03b/</a></li><li class="post-copyright-license"><strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="http://creativecommons.org/licenses/by/4.0/deed.zh" target="_blank" rel="external nofollow noopener noreferrer">CC BY 4.0 CN协议</a> 许可协议。转载请注明出处！</li></ul></blockquote><div class="panel panel-default panel-badger"><div class="panel-body"><figure class="media"><div class="media-left"><a href="https://github.com/pushName" target="_blank" class="img-burn thumb-sm visible-lg" rel="external nofollow noopener noreferrer"><img src="/images/avatar.jpg" class="img-rounded w-full" alt></a></div><div class="media-body"><h3 class="media-heading"><a href="https://github.com/pushName" target="_blank" rel="external nofollow noopener noreferrer"><span class="text-dark">阿智</span><small class="ml-1x">BigData</small></a></h3><div>个人简介。</div></div></figure></div></div></div></article><section id="comments"><div id="vcomments"></div></section></div><nav class="bar bar-footer clearfix" data-stick-bottom><div class="bar-inner"><ul class="pager pull-left"><li class="prev"><a href="/posts/3879ece7/" title="软件开发框架之MyBatis的关联映射"><i class="icon icon-angle-left" aria-hidden="true"></i><span>&nbsp;&nbsp;上一篇</span></a></li><li class="next"><a href="/posts/75b1eb49/" title="软件开发框架之spring-事务管理"><span>下一篇&nbsp;&nbsp;</span><i class="icon icon-angle-right" aria-hidden="true"></i></a></li></ul><button type="button" class="btn btn-fancy btn-donate pop-onhover bg-gradient-warning" data-toggle="modal" data-target="#donateModal"><span>赏</span></button><div class="bar-right"><div class="share-component" data-sites="weibo,qq,wechat,facebook,twitter" data-mobile-sites="weibo,qq,qzone"></div></div></div></nav><div class="modal modal-center modal-small modal-xs-full fade" id="donateModal" tabindex="-1" role="dialog"><div class="modal-dialog" role="document"><div class="modal-content donate"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><div class="modal-body"><div class="donate-box"><div class="donate-head"><p>感谢您的支持，我会继续努力的!</p></div><div class="tab-content"><div role="tabpanel" class="tab-pane fade active in" id="alipay"><div class="donate-payimg"><img src="/images/donate/alipayimg.png" alt="扫码支持" title="扫一扫"></div><p class="text-muted mv">扫码打赏，你说多少就多少</p><p class="text-grey">打开支付宝扫一扫，即可进行扫码打赏哦</p></div><div role="tabpanel" class="tab-pane fade" id="wechatpay"><div class="donate-payimg"><img src="/images/donate/wechatpayimg.png" alt="扫码支持" title="扫一扫"></div><p class="text-muted mv">扫码打赏，你说多少就多少</p><p class="text-grey">打开微信扫一扫，即可进行扫码打赏哦</p></div></div><div class="donate-footer"><ul class="nav nav-tabs nav-justified" role="tablist"><li role="presentation" class="active"><a href="#alipay" id="alipay-tab" role="tab" data-toggle="tab" aria-controls="alipay" aria-expanded="true"><i class="icon icon-alipay"></i> 支付宝</a></li><li role="presentation"><a href="#wechatpay" role="tab" id="wechatpay-tab" data-toggle="tab" aria-controls="wechatpay" aria-expanded="false"><i class="icon icon-wepay"></i> 微信支付</a></li></ul></div></div></div></div></div></div></main><footer class="footer" itemscope itemtype="http://schema.org/WPFooter"><ul class="social-links"><li><a href="https://github.com/pushName" target="_blank" title="Github" data-toggle="tooltip" data-placement="top" rel="external nofollow noopener noreferrer"><i class="icon icon-github"></i></a></li><li><a href="https://weibo.com/5966656169/profile?topnav=1&wvr=6&is_all=1" target="_blank" title="Weibo" data-toggle="tooltip" data-placement="top" rel="external nofollow noopener noreferrer"><i class="icon icon-weibo"></i></a></li><li><a href="https://twitter.com" target="_blank" title="Twitter" data-toggle="tooltip" data-placement="top" rel="external nofollow noopener noreferrer"><i class="icon icon-twitter"></i></a></li><li><a href="https://www.behance.net/" target="_blank" title="Behance" data-toggle="tooltip" data-placement="top" rel="external nofollow noopener noreferrer"><i class="icon icon-behance"></i></a></li><li><a href="/atom.xml" target="_blank" title="Rss" data-toggle="tooltip" data-placement="top"><i class="icon icon-rss"></i></a></li></ul><div class="copyright">&copy; 2021 阿智<div class="publishby">Theme by <a href="https://github.com/cofess" target="_blank" rel="external nofollow noopener noreferrer">cofess </a>base on <a href="https://github.com/cofess/hexo-theme-pure" target="_blank" rel="external nofollow noopener noreferrer">pure</a>.</div></div></footer><script src="//cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script><script>window.jQuery||document.write('<script src="js/jquery.min.js"><\/script>')</script><script src="/js/plugin.min.js"></script><script src="/js/application.js"></script><script>window.INSIGHT_CONFIG={TRANSLATION:{POSTS:"文章",PAGES:"页面",CATEGORIES:"分类",TAGS:"标签",UNTITLED:"(未命名)"},ROOT_URL:"/",CONTENT_URL:"/content.json"}</script><script src="/js/insight.js"></script><script>!function(w){w(".search-form").on("submit",function(n){var t=w('.search-form-input[name="wd"]').val();return window.location="https://www.baidu.com/s?wd=site:www.studyz.club "+t,!1})}(jQuery)</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//cdn.jsdelivr.net/npm/valine"></script><script type="text/javascript">var GUEST=["nick","mail","link"],meta=(meta="nick,mail,link").split(",").filter(function(e){return-1<GUEST.indexOf(e)});new Valine({el:"#vcomments",verify:"false",notify:"true",appId:"DJHtEILWubeHTVMtbHDl3w3r-gzGzoHsz",appKey:"IjLboSjrAXR7ziKvARXWCbmu",placeholder:"Just go go",avatar:"mm",meta:meta,pageSize:"10",visitor:"false"})</script><script defer type="text/javascript">!function(e,a,t,n,g,c){e.GoogleAnalyticsObject=n,e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=+new Date,g=a.createElement(t),c=a.getElementsByTagName(t)[0],g.async=1,g.src="//www.google-analytics.com/analytics.js",c.parentNode.insertBefore(g,c)}(window,document,"script","ga"),ga("create","true","auto"),ga("send","pageview")</script><script defer>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="//hm.baidu.com/hm.js?true";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><script defer type="text/javascript" src="//tajs.qq.com/stats?sId=true" charset="UTF-8"></script><script type="text/javascript" src="//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js"></script></body></html>